/**
  @license
  Dual-licensed: https://github.com/sybilla/meeus/blob/master/LICENSE.txt
 **/
"format register";System.register("sybilla/angle",[],!0,function(require,e,t){var n=System.global,a=n.define;n.define=void 0,function(e){e[e.Hour=0]="Hour",e[e.Degree=1]="Degree",e[e.Radian=2]="Radian"}(e.AngleStyle||(e.AngleStyle={}));var i=e.AngleStyle;!function(e){e[e.Reflective=0]="Reflective",e[e.Periodic=1]="Periodic"}(e.AngleNormalization||(e.AngleNormalization={}));var r=e.AngleNormalization,o=function(){function e(){}return e.parse=function(t,n,a){return e.matchToAngle(e.match(t,n,a))},e.match=function(t,n,a){null!=t&&(t=t.trim());for(var i=null,r=0;r<e.RegexPatterns.length;r++){var o=new RegExp(e.RegexPatterns[r],"g"),s=o.exec(t);if(null!=s){if(void 0===a){var c=n[r];a=void 0!==c?c:e.RegexPatternStyleMap[r]}i={match:s,style:a};break}}if(null==i)throw"s";return i},e.matchToAngle=function(e){var t=e.match[2];t&&(t=t.replace(",","."));var n=parseFloat(t);isNaN(n)&&(n=0);var t=e.match[4];t&&(t=t.replace(",","."));var a=parseFloat(t);isNaN(a)&&(a=0);var t=e.match[6];t&&(t=t.replace(",","."));var r=parseFloat(t);isNaN(r)&&(r=0);var o;switch(e.style){case i.Hour:o=s.fromHours(n,a,r);break;case i.Degree:o=s.fromDegrees(n,a,r);break;case i.Radian:o=s.fromRadians(n);break;default:throw"style"}return"-"===e.match[1]&&(o=o.negative()),o},e.RegexPatterns=["d ([+-])?(\\d{1,3}):( )?(\\d{1,2}):( )?(\\d{1,2}([\\.,]\\d+)?)","([+-])?(\\d{1,3}):( )?(\\d{1,2}):( )?(\\d{1,2}([\\.,]\\d+)?)","d ([+-])?(\\d{1,3})() (\\d{1,2})() (\\d{1,2}([\\.,]\\d+)?)","([+-])?(\\d{1,3})() (\\d{1,2})() (\\d{1,2}([\\.,]\\d+)?)","([+-])?(\\d{1,3})h( )?(\\d{1,2})m( )?(\\d{1,2}([\\.,]\\d+)?)[s]?","([+-])?(\\d{1,3})d( )?(\\d{1,2})m( )?(\\d{1,2}([\\.,]\\d+)?)[s]?","([+-])?(\\d{1,3})[\xb0*]( )?(\\d{1,2})'( )?(\\d{1,2}([\\.,]\\d+)?)[\"]?","([a-zA-Z])(\\d{2})()(\\d{2})()(\\d{2}([\\.,]\\d+)?)","([+-])?(\\d{2})()(\\d{2})()(\\d{2}([\\.,]\\d+)?)","([+-])?(\\d{2})()(\\d{2}[\\.,]\\d+)","[d][ ]([+-])?(\\d{1,3}([\\.\\,]\\d+)?)","([+-])?(\\d{1,3}([\\.,]\\d+)?)"],e.RegexPatternStyleMap={0:i.Degree,1:i.Degree,2:i.Degree,3:i.Degree,4:i.Hour,5:i.Degree,6:i.Degree,7:i.Hour,8:i.Degree,9:i.Degree,10:i.Degree,11:i.Radian},e}();e.AngleParser=o;var s=function(){function e(t){this._dms=t*e.DegreeMillisecondsInDegree}return Object.defineProperty(e.prototype,"hours",{get:function(){return this._dms/(e.DegreeMillisecondsInMillisecond*e.DegreeMillisecondsInDegree)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hour",{get:function(){return 0|this.hours},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hourMinutes",{get:function(){return(0|this._dms/e.DegreeMillisecondsInMillisecond)%e.DegreeMillisecondsInDegree/e.DegreeMillisecondsInDegreeMinute},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hourMinute",{get:function(){return 0|this.hourMinutes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hourSeconds",{get:function(){return(0|this._dms/e.DegreeMillisecondsInMillisecond)%e.DegreeMillisecondsInDegreeMinute/e.DegreeMillisecondsInDegreeSecond},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hourSecond",{get:function(){return 0|this.hourSeconds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hourMilliseconds",{get:function(){return(0|this._dms/e.DegreeMillisecondsInMillisecond)%e.DegreeMillisecondsInDegreeSecond},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hourMillisecond",{get:function(){return 0|this.hourMilliseconds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"degrees",{get:function(){return this._dms/e.DegreeMillisecondsInDegree},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"degree",{get:function(){return 0|this.degrees},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"degreeMinutes",{get:function(){return(0|this._dms)%e.DegreeMillisecondsInDegree/e.DegreeMillisecondsInDegreeMinute},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"degreeMinute",{get:function(){return 0|this.degreeMinutes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"degreeSeconds",{get:function(){return(0|this._dms)%e.DegreeMillisecondsInDegreeMinute/e.DegreeMillisecondsInDegreeSecond},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"degreeSecond",{get:function(){return 0|this.degreeSeconds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"degreeMilliseconds",{get:function(){return this._dms},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"degreeMillisecond",{get:function(){return 0|this.degreeMilliseconds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radians",{get:function(){return this.degrees*Math.PI/180},enumerable:!0,configurable:!0}),e.prototype.addHours=function(t){return e.fromHours(this.hours+t)},e.prototype.addHourMinutes=function(t){return e.fromHours(this.hours,t)},e.prototype.addHourSeconds=function(t){return e.fromHours(this.hours,0,t)},e.prototype.addHourMilliseconds=function(t){return e.fromHours(this.hours,0,0,t)},e.prototype.addDegrees=function(t){return e.fromDegrees(this.degrees+t)},e.prototype.addDegreeMinutes=function(t){return e.fromDegrees(this.degrees,t)},e.prototype.addDegreeSeconds=function(t){return e.fromDegrees(this.degrees,0,t)},e.prototype.addDegreeMilliseconds=function(t){return e.fromDegrees(this.degrees,0,0,t)},e.prototype.toFormattedString=function(t){t=t||{};var n=1,a="D",i=typeof t;switch("string"===i?a=t:"number"===i?n=t:(t.format=t.format||a,t.digits=null!=t.digits?t.digits:n,a=t.format,n=t.digits),a){case"H":var r=this.hourSeconds,o=this.hourMinute,s=this.hour,c=e.absPad(r,n);return r=parseFloat(c),r>=60&&(r-=60,o+=1),o>=60&&(o-=60,s+=1),s>=24&&(s-=24),s+"h"+e.absPad(o)+"m"+e.absPad(r,n)+"s";case"D":var u=this._dms<0?"-":"",l=this.degreeSeconds,d=this.degreeMinute,f=this.degree,h=e.absPad(l,n);return l=parseFloat(h),l>=60&&(l-=60,d+=1),d>=60&&(d-=60,f+=1),f>=360&&(f-=360),u+Math.abs(f)+"\xb0"+e.absPad(d)+"'"+e.absPad(l,n)+'"';case"R":return this.radians.toFixed(2).toString();default:return""}},e.prototype.negative=function(){return e.fromDegrees(0,0,0,-this._dms)},e.prototype.normalize=function(e,t){switch(e=e||0,t=void 0===t?r.Periodic:t){case r.Reflective:return this.__normalizeReflective(e);case r.Periodic:return this.__normalizePeriodic(e);default:throw"normalization"}},e.prototype.__normalizeReflective=function(t){var n=180,a=t+n,i=this.__normalizeInternal(t-90);return t>i?i=t+Math.min(Math.abs(i-t),Math.abs(i+t)):i>=a&&(i=a-Math.min(Math.abs(i-a),Math.abs(i+a))),e.fromDegrees(i)},e.prototype.__normalizePeriodic=function(t){return e.fromDegrees(this.__normalizeInternal(t))},e.prototype.__normalizeInternal=function(e){var t=360,n=this.degrees,a=(n-e)/t;return 0>a&&(a-=1),n-=(0|a)*t},e.fromDegrees=function(t,n,a,i){if(t=t||0,n=n||0,a=a||0,i=i||0,t=t+n/60+a/3600+i/36e5,Math.abs(t)>=360){var r=Math.floor(t),o=t-r;r%=360,t=r+o}return new e(t)},e.fromHours=function(t,n,a,i){if(t=t||0,n=n||0,a=a||0,i=i||0,t=t+n/60+a/3600+i/36e5,Math.abs(t)>=24){var r=Math.floor(t),o=t-r;r%=24,t=r+o}return new e(t*e.DegreeMillisecondsInMillisecond)},e.fromRadians=function(t){return t=t||0,e.fromDegrees(180*t/Math.PI)},e.parse=function(e,t){return o.parse(e,o.RegexPatternStyleMap,t)},e.absPad=function(e,t){t=t||0;var n=(10>e&&e>-10?"0":"")+(t>0?Math.abs(e).toFixed(t+1):Math.abs(e).toFixed(t));return t>0&&(n=n.substr(0,t+3)),n},e.DegreeMillisecondsInDegree=36e5,e.DegreeMillisecondsInDegreeMinute=6e4,e.DegreeMillisecondsInDegreeSecond=1e3,e.DegreeMillisecondsInMillisecond=15,e}();return e.Angle=s,n.define=a,t.exports}),System.register("sybilla/datetime/hjddate",[],!0,function(require,e,t){var n=System.global,a=n.define;n.define=void 0;var i=function(){function e(e){this._days=e}return Object.defineProperty(e.prototype,"days",{get:function(){return this._days},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"daysSinceJ2000",{get:function(){return this._days-2451545},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centuriesSinceJ2000",{get:function(){return this.daysSinceJ2000/36525},enumerable:!0,configurable:!0}),e.prototype.addDays=function(t){return new e(this.days+t)},e.prototype.addHours=function(t){return new e(this.days+t/24)},e.prototype.addMinutes=function(t){return new e(this.days+t/1440)},e.prototype.addSeconds=function(t){return new e(this.days+t/86400)},e.prototype.addMilliseconds=function(t){return new e(this.days+t/864e5)},e}();return e.HjdDate=i,n.define=a,t.exports}),System.register("sybilla/datetime/ttdate",[],!0,function(require,e,t){var n=System.global,a=n.define;n.define=void 0;var i=function(){function e(e){this._days=e}return Object.defineProperty(e.prototype,"days",{get:function(){return this._days},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"daysSinceJ2000",{get:function(){return this._days-2451545},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centuriesSinceJ2000",{get:function(){return this.daysSinceJ2000/36525},enumerable:!0,configurable:!0}),e.prototype.addDays=function(t){return new e(this.days+t)},e.prototype.addHours=function(t){return new e(this.days+t/24)},e.prototype.addMinutes=function(t){return new e(this.days+t/1440)},e.prototype.addSeconds=function(t){return new e(this.days+t/86400)},e.prototype.addMilliseconds=function(t){return new e(this.days+t/864e5)},e}();return e.TtDate=i,n.define=a,t.exports}),System.register("sybilla/datetime/siderealtimes",["sybilla/datetime/utcdate"],!0,function(require,e,t){var n=System.global,a=n.define;n.define=void 0;var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=require("sybilla/datetime/utcdate"),o=function(){function e(e){this._hours=e}return Object.defineProperty(e.prototype,"hours",{get:function(){return this._hours},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hour",{get:function(){return 0|this._hours},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minutes",{get:function(){return 60*(this.hours-this.hour)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minute",{get:function(){return 0|this.minutes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"seconds",{get:function(){return 60*(this.minutes-this.minute)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"second",{get:function(){return 0|this.seconds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"milliseconds",{get:function(){return 1e3*(this.seconds-this.second)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"millisecond",{get:function(){return 0|this.milliseconds},enumerable:!0,configurable:!0}),e.prototype.toFormattedString=function(){var t=Math.round(this.seconds),n=Math.round(this.minute),a=this.hour;return 60==t&&(n+=1,t=0),n>=60&&(a+=1,n-=60),a+":"+e.absPad(n)+":"+e.absPad(t)},e.absPad=function(e,t){var n=Math.abs(e).toFixed(t||0),a=parseFloat(n);return(10>a&&a>-10?"0":"")+n},e}();e.__BaseTime=o;var s=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.fromDate=function(e){return r.UtcDate.fromDate(e).toGmsTime()},t}(o);e.GmsTime=s;var c=function(e){function t(){e.apply(this,arguments)}return i(t,e),t}(o);e.LmsTime=c;var u=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.fromDate=function(e){return r.UtcDate.fromDate(e).toGasTime()},t}(o);e.GasTime=u;var l=function(e){function t(){e.apply(this,arguments)}return i(t,e),t}(o);return e.LasTime=l,n.define=a,t.exports}),System.register("sybilla/datetime/taidate",[],!0,function(require,e,t){var n=System.global,a=n.define;n.define=void 0;var i=function(){function e(e){this._days=e}return Object.defineProperty(e.prototype,"days",{get:function(){return this._days},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"daysSinceJ2000",{get:function(){return this._days-2451545},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centuriesSinceJ2000",{get:function(){return this.daysSinceJ2000/36525},enumerable:!0,configurable:!0}),e.prototype.addDays=function(t){return new e(this.days+t)},e.prototype.addHours=function(t){return new e(this.days+t/24)},e.prototype.addMinutes=function(t){return new e(this.days+t/1440)},e.prototype.addSeconds=function(t){return new e(this.days+t/86400)},e.prototype.addMilliseconds=function(t){return new e(this.days+t/864e5)},e}();return e.TaiDate=i,n.define=a,t.exports}),System.register("sybilla/coordinateSystems/geographicCoordinates",["sybilla/angle","sybilla/core/meeusEngine"],!0,function(require,e,t){var n=System.global,a=n.define;n.define=void 0;var i=require("sybilla/angle"),r=require("sybilla/core/meeusEngine"),o=function(){function e(e,t,n){this.latitude=e,this.longitude=t,this._alt=n||0}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},set:function(e){this._lat=e.normalize(-90,i.AngleNormalization.Reflective)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._lon},set:function(e){this._lon=e.normalize(-180)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"altitude",{get:function(){return this._alt},enumerable:!0,configurable:!0}),e.prototype.sunrise=function(e,t){return r.MeeusEngine.getSunriseAt(this,e,t)},e.prototype.sunset=function(e,t){return r.MeeusEngine.getSunsetAt(this,e,t)},e.prototype.toFormattedString=function(e){return e=e||{},null==e.digits&&(e.digits=1),this.latitude.toFormattedString({format:"D",digits:e.digits})+" "+this.longitude.toFormattedString({format:"D",digits:e.digits})+" "+this.altitude},e.parse=function(t,n,a){var r=i.AngleParser.match(t,e.RegexPatternStyleMap,n);if(!r.match)throw"s";var o=i.AngleParser.matchToAngle(r);if(t=t.substr(t.indexOf(r.match[0])+r.match[0].length),r=i.AngleParser.match(t,e.RegexPatternStyleMap,a),!r.match)throw"s";var s=i.AngleParser.matchToAngle(r);t=t.substr(t.indexOf(r.match[0])+r.match[0].length).trim();var c=parseFloat(t);return isNaN(c)&&(c=0),new e(o,s,c)},e.RegexPatternStyleMap={7:i.AngleStyle.Degree,11:i.AngleStyle.Degree},e}();return e.GeographicCoordinates=o,n.define=a,t.exports}),System.register("sybilla/coordinateSystems/equatorialCoordinates",["sybilla/angle","sybilla/core/meeusEngine"],!0,function(require,e,t){var n=System.global,a=n.define;n.define=void 0;var i=require("sybilla/angle"),r=require("sybilla/core/meeusEngine"),o=function(){function e(e,t){this.rightAscension=e,this.declination=t}return Object.defineProperty(e.prototype,"rightAscension",{get:function(){return this._ra},set:function(e){this._ra=e.normalize()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"declination",{get:function(){return this._dec},set:function(e){this._dec=e.normalize(-90,i.AngleNormalization.Reflective)},enumerable:!0,configurable:!0}),e.prototype.toHorizontalCoordinates=function(e,t){return r.MeeusEngine.toHorizontalCoordinates(this,e,t)},e.prototype.toFormattedString=function(e){return e=e||{},null==e.digits&&(e.digits=1),this.rightAscension.toFormattedString({format:"H",digits:e.digits})+" "+this.declination.toFormattedString({format:"D",digits:e.digits})},e.parse=function(t,n,a){var r=i.AngleParser.match(t,e.RaPatternStyleMap,n);if(!r.match)throw"s";var o=i.AngleParser.matchToAngle(r);if(t=t.substr(t.indexOf(r.match[0])+r.match[0].length),r=i.AngleParser.match(t,e.DecPatternStyleMap,a),!r.match)throw"s";var s=i.AngleParser.matchToAngle(r);return new e(o,s)},e.RaPatternStyleMap={1:i.AngleStyle.Hour,3:i.AngleStyle.Hour,8:i.AngleStyle.Hour,11:i.AngleStyle.Hour},e.DecPatternStyleMap={7:i.AngleStyle.Degree,11:i.AngleStyle.Degree},e}();return e.EquatorialCoordinates=o,n.define=a,t.exports}),System.register("sybilla/coordinateSystems/horizontalCoordinates",["sybilla/angle","sybilla/core/meeusEngine"],!0,function(require,e,t){var n=System.global,a=n.define;n.define=void 0;var i=require("sybilla/angle"),r=require("sybilla/core/meeusEngine"),o=function(){function e(e,t){this.altitude=e,this.azimuth=t}return Object.defineProperty(e.prototype,"altitude",{get:function(){return this._alt},set:function(e){this._alt=e.normalize(-90,i.AngleNormalization.Reflective)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"azimuth",{get:function(){return this._az},set:function(e){this._az=e.normalize()},enumerable:!0,configurable:!0}),e.prototype.toEquatorialCoordinates=function(e,t){return r.MeeusEngine.toEquatorialCoordinates(this,e,t)},e.prototype.toFormattedString=function(e){return e=e||{},null==e.digits&&(e.digits=1),this.altitude.toFormattedString({format:"D",digits:e.digits})+" "+this.azimuth.toFormattedString({format:"D",digits:e.digits})},e.parse=function(t,n,a){var r=i.AngleParser.match(t,e.RegexPatternStyleMap,n);if(!r.match)throw"s";var o=i.AngleParser.matchToAngle(r);if(t=t.substr(t.indexOf(r.match[0])+r.match[0].length),r=i.AngleParser.match(t,e.RegexPatternStyleMap,a),!r.match)throw"s";var s=i.AngleParser.matchToAngle(r);return new e(o,s)},e.RegexPatternStyleMap={7:i.AngleStyle.Degree,11:i.AngleStyle.Degree},e}();return e.HorizontalCoordinates=o,n.define=a,t.exports}),System.register("sybilla/solarSystem/earth",["sybilla/core/meeusEngine","sybilla/datetime/utcdate"],!0,function(require,e,t){var n=System.global,a=n.define;n.define=void 0;var i=require("sybilla/core/meeusEngine"),r=require("sybilla/datetime/utcdate"),o=function(){function e(){}return e.orbitalEccentricity=function(e){var t=e;return t instanceof Date&&(t=r.UtcDate.fromDate(e)),i.MeeusEngine.earthCartesianPositionAt(t)},e.cartesianPositionAt=function(e){var t=e;return t instanceof Date&&(t=r.UtcDate.fromDate(e)),i.MeeusEngine.earthCartesianPositionAt(t)},e.cartesianVelocityAt=function(e){var t=e;return t instanceof Date&&(t=r.UtcDate.fromDate(e)),i.MeeusEngine.earthCartesianVelocityAt(t)},e}();return e.Earth=o,n.define=a,t.exports}),System.register("sybilla/solarSystem/sun",["sybilla/datetime/utcdate","sybilla/core/meeusEngine"],!0,function(require,e,t){var n=System.global,a=n.define;n.define=void 0;var i=require("sybilla/datetime/utcdate"),r=require("sybilla/core/meeusEngine"),o=function(){function e(){}return e.positionAt=function(e){var t=e;return t instanceof Date&&(t=i.UtcDate.fromDate(e)),r.MeeusEngine.sunPositionAt(t)},e}();return e.Sun=o,n.define=a,t.exports}),System.register("sybilla/coordinateSystems/eclipticCoordinates",["sybilla/angle"],!0,function(require,e,t){var n=System.global,a=n.define;n.define=void 0;var i=require("sybilla/angle"),r=function(){function e(e,t){this.latitude=e,this.longitude=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},set:function(e){this._lat=e.normalize(-90,i.AngleNormalization.Reflective)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._lon},set:function(e){this._lon=e.normalize(-180)},enumerable:!0,configurable:!0}),e.prototype.toFormattedString=function(e){return e=e||{},null==e.digits&&(e.digits=1),this.latitude.toFormattedString({format:"D",digits:e.digits})+" "+this.longitude.toFormattedString({format:"D",digits:e.digits})},e.parse=function(t,n,a){var r=i.AngleParser.match(t,e.RegexPatternStyleMap,n);if(!r.match)throw"s";var o=i.AngleParser.matchToAngle(r);if(t=t.substr(t.indexOf(r.match[0])+r.match[0].length),r=i.AngleParser.match(t,e.RegexPatternStyleMap,a),!r.match)throw"s";var s=i.AngleParser.matchToAngle(r);return t=t.substr(t.indexOf(r.match[0])+r.match[0].length).trim(),new e(o,s)},e.RegexPatternStyleMap={7:i.AngleStyle.Degree,11:i.AngleStyle.Degree},e}();return e.EclipticCoordinates=r,n.define=a,t.exports}),System.register("sybilla/core/meeusEngine",["sybilla/angle","sybilla/datetime/utcdate","sybilla/datetime/hjddate","sybilla/datetime/ttdate","sybilla/datetime/siderealtimes","sybilla/datetime/taidate","sybilla/coordinateSystems/geographicCoordinates","sybilla/coordinateSystems/equatorialCoordinates","sybilla/coordinateSystems/horizontalCoordinates"],!0,function(require,e,t){var n=System.global,a=n.define;n.define=void 0;var i=require("sybilla/angle"),r=require("sybilla/datetime/utcdate"),o=require("sybilla/datetime/hjddate"),s=require("sybilla/datetime/ttdate"),c=require("sybilla/datetime/siderealtimes"),u=require("sybilla/datetime/taidate"),l=require("sybilla/coordinateSystems/geographicCoordinates"),d=require("sybilla/coordinateSystems/equatorialCoordinates"),f=require("sybilla/coordinateSystems/horizontalCoordinates");!function(e){e[e.Official=0]="Official",e[e.Astronomical=1]="Astronomical",e[e.Nautical=2]="Nautical",e[e.Civil=3]="Civil"}(e.Twilight||(e.Twilight={}));var h=e.Twilight,g=function(){function e(){}return e.getLeapSeconds=function(t){for(var n=null,a=0;a<e.LeapSeconds.length;a++){var i=e.LeapSeconds[a];if(i.utcdays<t){n=i.taiutc;break}}if(null==n)throw"days";return n.p1+(t-2400000.5-n.p2)*n.p3},e.toTaiDate=function(t){var n=e.getLeapSeconds(t.days);return new u.TaiDate(t.days+n/86400)},e.toTtDate=function(t){var n=e.getLeapSeconds(t.days)+e.TaiToTtOffsetSeconds;return new s.TtDate(t.days+n/86400)},e.toGmsTime=function(t){var n=t.daysSinceJ2000,a=n/36525,i=a*a,r=i*a,o=280.46061837+360.98564736629*n+387933e-9*i-r/3871e4;return new c.GmsTime(e.normalize(o)/15)},e.toLmsTime=function(t,n){var a=n;a instanceof i.Angle?a=a.degrees:a instanceof l.GeographicCoordinates&&(a=a.longitude.degrees);var r=t.daysSinceJ2000,o=r/36525,s=o*o,u=s*o,d=280.46061837+360.98564736629*r+387933e-9*s-u/3871e4+a;return new c.LmsTime(e.normalize(d)/15)},e.toGasTime=function(t){return new c.GasTime(e.toGasDegrees(t)/15)},e.toLasTime=function(t,n){var a=n;a instanceof i.Angle?a=a.degrees:a instanceof l.GeographicCoordinates&&(a=a.longitude.degrees);var r=e.toGasDegrees(t);return r+=a,new c.LasTime(e.normalize(r)/15)},e.toHjdDate=function(t,n,a){var i=e.earthPositionAt(t),r=e.equatorialToCartesian(i),s=e.equatorialToCartesian(a),c=e.MinsPerAU*(r.x*s.x+r.y*s.y+r.z*s.z);return new o.HjdDate(t.days).addMinutes(c)},e.getSunriseAt=function(t,n,a){return e.calc_SunriseOrSunset(!0,e.prepareJd(n||new Date),t,a||h.Official)},e.getSunsetAt=function(t,n,a){return e.calc_SunriseOrSunset(!1,e.prepareJd(n||new Date),t,a||h.Official)},e.sunPositionAt=function(t){var n=e.preparePositionalParameters(t.centuriesSinceJ2000),a=n.sun.trueLongitude,r=n.ecliptic.meanObliquity,o=e.datan2(e.dsin(a)*e.dcos(r)-e.dtan(0)*e.dsin(r),e.dcos(a)),s=e.dasin(e.dsin(0)*e.dcos(r)+e.dcos(0)*e.dsin(r)*e.dsin(a));return new d.EquatorialCoordinates(i.Angle.fromDegrees(o),i.Angle.fromDegrees(s))},e.earthPositionAt=function(t){var n=e.preparePositionalParameters(t.centuriesSinceJ2000),a=n.sun.trueLongitude,r=n.ecliptic.meanObliquity,o=e.datan2(e.dsin(a)*e.dcos(r)-e.dtan(0)*e.dsin(r),e.dcos(a)),s=e.dasin(e.dsin(0)*e.dcos(r)+e.dcos(0)*e.dsin(r)*e.dsin(a));return o+=180,o>360&&(o-=360),s*=-1,new d.EquatorialCoordinates(i.Angle.fromDegrees(o),i.Angle.fromDegrees(s))},e.moonPositionAt=function(t){var n=t.centuriesSinceJ2000,a=n*n,r=a*n,o=e.preparePositionalParameters(n),s=o.sun.earthDistance,c=o.sun.meanAnomaly,u=o.ecliptic.meanObliquity,l=(o.sun.apparentLongitude,e.calc_Moon_ArgumentOfLatitude(n,a,r)),f=e.calc_Moon_MeanLongitude(n),h=(e.calc_Moon_LongitudeAscendingNode(n,a,r),e.calc_Moon_MeanAnomaly(n,a,r)),g=e.calc_Moon_MeanElongation(n,a,r),p=e.calc_Moon_Earth_Distance(h,g),y=(e.calc_Moon_Sun_DistanceRatio(p,s),e.calc_Moon_GeocentricLatitude(l,h,g)),M=e.calc_Moon_GeocentricLongitude(h,g,f,l,c),m=e.datan2(e.dsin(M)*e.dcos(u)-e.dtan(y)*e.dsin(u),e.dcos(M)),_=e.dasin(e.dsin(y)*e.dcos(u)+e.dcos(y)*e.dsin(u)*e.dsin(M));return new d.EquatorialCoordinates(i.Angle.fromDegrees(m),i.Angle.fromDegrees(_))},e.getAngularSeparation=function(t,n){var a=t.rightAscension.radians,r=t.declination.radians,o=n.rightAscension.radians,s=n.declination.radians,c=Math.sqrt(Math.cos(s)*Math.sin(a-o)*(Math.cos(s)*Math.sin(a-o))+(Math.cos(r)*Math.sin(s)-Math.cos(s)*Math.sin(r)*Math.cos(a-o))*(Math.cos(r)*Math.sin(s)-Math.cos(s)*Math.sin(r)*Math.cos(a-o))),u=Math.sin(r)*Math.sin(s)+Math.cos(r)*Math.cos(s)*Math.cos(a-o),l=Math.atan2(c,u)*e.R2D;return i.Angle.fromDegrees(l)},e.toHorizontalCoordinates=function(t,n,a){var o,s;n instanceof Date?o=r.UtcDate.fromDate(n):n instanceof r.UtcDate&&(o=n);var c=e.fromJ2000(t,o);s=e.toLasTime(o,a.longitude.degrees);var u=i.Angle.fromHours(s.hours-c.rightAscension.hours).normalize(),l=u.radians,d=c.declination.radians,h=a.latitude.radians,g=Math.sin(d)*Math.sin(h)+Math.cos(d)*Math.cos(h)*Math.cos(l),p=Math.asin(g),y=(Math.sin(d)-Math.sin(p)*Math.sin(h))/(Math.cos(p)*Math.cos(h)),M=Math.acos(y),m=p*e.R2D,_=M*e.R2D;return Math.sin(l)>0&&(_=360-_),new f.HorizontalCoordinates(e.toTopocentric(m),i.Angle.fromDegrees(_))},e.toEquatorialCoordinates=function(t,n,a){var o;n instanceof Date?o=r.UtcDate.fromDate(n):n instanceof r.UtcDate&&(o=n);var s=t.azimuth.degrees+180;s>=360&&(s-=360);var c=s*e.D2R,u=a.latitude.radians,l=e.toGeocentric(t.altitude).radians,f=i.Angle.fromRadians(Math.atan2(Math.sin(c),Math.cos(c)*Math.sin(u)+Math.tan(l)*Math.cos(u))),h=o.toLasTime(a.longitude.degrees),g=i.Angle.fromHours(h.hours-f.hours).normalize(),p=Math.sin(u)*Math.sin(l)-Math.cos(u)*Math.cos(l)*Math.cos(c);if(-1>p||p>1)throw"Illegal value: "+p+", should be in [-1,1].";var y=Math.asin(p);return e.toJ2000(new d.EquatorialCoordinates(g,i.Angle.fromRadians(y)),o)},e.dsin=function(t){return Math.sin(e.D2R*t)},e.dcos=function(t){return Math.cos(e.D2R*t)},e.dtan=function(t){return Math.tan(e.D2R*t)},e.dasin=function(t){return e.R2D*Math.asin(t)},e.dacos=function(t){return e.R2D*Math.acos(t)},e.datan=function(t){return e.R2D*Math.atan(t)},e.datan2=function(t,n){var a;return 0==n&&0==t?0:(a=e.datan(t/n),0>n&&(a+=180),0>t&&n>0&&(a+=360),a)},e.normalize=function(e){return e-360*Math.floor(e/360)},e.addCartesian=function(e,t){return{x:e.x+t.x,y:e.y+t.y,z:e.z+t.z}},e.equatorialToCartesian=function(e){var t=e.rightAscension.radians,n=e.declination.radians,a=Math.cos(n),i=Math.cos(t)*a,r=Math.sin(t)*a,o=Math.sin(n);return{x:i,y:r,z:o}},e.geographicToCartesian=function(e,t){var n=t.toGasTime(),a=.9933056213348961,i=.017453292519943295*e.latitude.degrees,r=Math.sin(i),o=Math.cos(i),s=1/Math.sqrt(Math.pow(o,2)+a*Math.pow(r,2)),c=a*s,u=e.altitude/1e3,l=6378.14*s+u,d=6378.14*c+u,f=e.longitude.degrees,h=.017453292519943295*(15*n.hours+f),g=Math.sin(h),p=Math.cos(h);return{x:l*o*p/149597870,y:l*o*g/149597870,z:d*r/149597870}},e.preparePositionalParameters=function(t){var n=e.calc_Sun_MeanLongitude(t),a=e.calc_Sun_MeanAnomaly(t),i=e.calc_Sun_EqOfCenter(t,a),r=e.calc_Sun_TrueAnomaly(t,a,i),o=e.calc_Earth_OrbitEccentricity(t),s=e.calc_Sun_TrueLong(t,n,i),c=e.calc_Sun_LongitudeOfAscendingNode(t),u=e.calc_Sun_ApparentLong(t,s,c),l=e.calc_Ecliptic_MeanObliquity(t),d=e.calc_Sun_Earth_Distance(t,o,a,i,r);return{sun:{trueLongitude:s,apparentLongitude:u,earthDistance:d,meanAnomaly:a},ecliptic:{meanObliquity:l}}},e.calc_Earth_OrbitEccentricity=function(e){return.016708634-e*(42037e-9+1.267e-7*e)},e.earthCartesianPositionAt=function(t){var n=e.earthPositionAt(t);return e.equatorialToCartesian(n)},e.earthCartesianVelocityAt=function(t){var n=e.earthPositionAt(t),a=e.earthPositionAt(t.addMinutes(-1)),i=e.equatorialToCartesian(n),r=e.equatorialToCartesian(a);return{x:(i.x-r.x)/704e-6,y:(i.y-r.y)/704e-6,z:(i.z-r.z)/704e-6}},e.convertToHeliocentric=function(t,n){var a=e.earthCartesianPositionAt(n),i=e.geographicToCartesian(t,n),r={x:a.x+i.x,y:a.y+i.y,z:a.z+i.z};return r},e.calc_Ecliptic_MeanObliquity=function(e,t,n){return t=t||e*e,n=n||t*e,23.43929111111111+(-46.815*e-59e-5*t+.001813*n)/3600},e.calc_Ecliptic_ObliquityCorrection=function(t,n){var a=n||e.calc_Ecliptic_MeanObliquity(t),i=e.calc_Sun_LongitudeOfAscendingNode(t);return a+.00256*Math.cos(e.D2R*i)},e.calc_Sun_Earth_Distance=function(t,n,a,i,r){return n=n||e.calc_Earth_OrbitEccentricity(t),a=a||e.calc_Sun_MeanAnomaly(t),i=i||e.calc_Sun_EqOfCenter(t,a),r=r||e.calc_Sun_TrueAnomaly(t,a,i),.99972/(1+n*e.dcos(r))},e.calc_Sun_MeanLongitude=function(t){return e.normalize(280.46646+t*(36000.76983+3032e-7*t))},e.calc_Sun_MeanAnomaly=function(t,n,a){return n=n||t*t,a=a||t*n,e.normalize(357.52772+35999.05034*t-1603e-7*n-a/3e5)},e.calc_Sun_EqOfCenter=function(t,n){var a=n||e.calc_Sun_MeanAnomaly(t),i=e.D2R*a,r=Math.sin(i),o=Math.sin(i+i),s=Math.sin(i+i+i);return r*(1.914602-t*(.004817+14e-6*t))+o*(.019993-101e-6*t)+289e-6*s},e.calc_Sun_TrueLong=function(t,n,a){var i=n||e.calc_Sun_MeanLongitude(t),r=a||e.calc_Sun_EqOfCenter(t);return i+r},e.calc_Sun_TrueAnomaly=function(t,n,a){var i=n||e.calc_Sun_MeanAnomaly(t),r=a||e.calc_Sun_EqOfCenter(t);return i+r},e.calcSunRadVector=function(t,n,a){var i=n||e.calc_Sun_TrueAnomaly(t),r=a||e.calc_Earth_OrbitEccentricity(t),o=1.000001018*(1-r*r)/(1+r*Math.cos(e.D2R*i));return o},e.calc_Sun_LongitudeOfAscendingNode=function(t,n,a){return n=n||t*t,a=a||n*t,e.normalize(125.04452-1934.136261*t+.0020708*n+a/45e4)},e.calc_Sun_ApparentLong=function(t,n,a){var i=n||e.calc_Sun_TrueLong(t),a=a||e.calc_Sun_LongitudeOfAscendingNode(t);return i-.00569-.00478*Math.sin(e.D2R*a)},e.calc_Moon_MeanAnomaly=function(t,n,a){return n=n||t*t,a=a||n*t,e.normalize(134.96298+477198.867398*t+.0086972*n+a/56250)},e.calc_Moon_MeanElongation=function(t,n,a){return n=n||t*t,a=a||n*t,e.normalize(297.85036+445267.11148*t-.0019142*n+a/189474)},e.calc_Moon_MeanLongitude=function(t){return e.normalize(218.316+481267.8813*t)},e.calc_Moon_LongitudeAscendingNode=function(t,n,a){return e.normalize(125.045-1934.14*t+.002071*n+a/45e4)},e.calc_Moon_Earth_Distance=function(t,n){var a=2*n;return 1+(-20954*e.dcos(t)-3699*e.dcos(a-t)-2956*e.dcos(t))/385e3},e.calc_Moon_Sun_DistanceRatio=function(e,t){return e/t/379.168831168831},e.calc_Moon_GeocentricLatitude=function(t,n,a){var i=2*a,r=5.128*e.dsin(t)+.2806*e.dsin(n+t);return r=r+.2777*e.dsin(n-t)+.1732*e.dsin(i-t)},e.calc_Moon_GeocentricLongitude=function(t,n,a,i,r){var o=t,s=2*n,c=i,u=r,l=a,d=6.289*e.dsin(o)+1.274*e.dsin(s-o)+.6583*e.dsin(s);return d=d+.2136*e.dsin(2*o)-.1851*e.dsin(u)-.1143*e.dsin(2*c),d+=.0588*e.dsin(s-2*o),d=d+.0572*e.dsin(s-u-o)+.0533*e.dsin(s+o),d+=l},e.calc_Moon_HeliocentricLatitude=function(e,t){return e*t},e.calc_Moon_HeliocentricLongitude=function(t,n,a,i){return e.normalize(t+180+180/Math.PI*n*e.dcos(a)*e.dsin(t-i))},e.calc_Moon_ArgumentOfLatitude=function(t,n,a){return n=n||t*t,a=a||n*t,e.normalize(93.27191+483202.017538*t-.0036825*n+a/327270)},e.calc_Moon_LongitudeOfTerminator=function(t){var n,a,r=t.centuriesSinceJ2000,o=r*r,s=r*o,c=e.calc_Earth_OrbitEccentricity(r),u=e.calc_Sun_MeanAnomaly(r,o,s),l=e.calc_Sun_EqOfCenter(r,u),d=e.calc_Sun_TrueAnomaly(r,u,l),f=e.calc_Sun_Earth_Distance(r,c,u,l,d),h=e.calc_Sun_LongitudeOfAscendingNode(r,o,s),g=e.calc_Sun_MeanLongitude(r),p=e.calc_Sun_TrueLong(r,g,l),y=e.calc_Sun_ApparentLong(r,p,h),M=e.calc_Moon_MeanAnomaly(r,o,s),m=e.calc_Moon_MeanElongation(r,o,s),_=e.calc_Moon_Earth_Distance(M,m),b=e.calc_Moon_Sun_DistanceRatio(_,f),D=e.calc_Moon_ArgumentOfLatitude(r,o,s),S=e.calc_Moon_GeocentricLatitude(D,M,m),v=e.calc_Moon_MeanLongitude(r),A=e.calc_Moon_GeocentricLongitude(M,m,v,D,u),P=e.calc_Moon_HeliocentricLatitude(b,S),O=e.calc_Moon_HeliocentricLongitude(y,b,P,A),R=1.54242,T=e.normalize(O-h),E=e.dcos(T)*e.dcos(P),w=e.dsin(T)*e.dcos(P)*e.dcos(R)-e.dsin(P)*e.dsin(R),C=e.datan2(w,E),z=e.normalize(C-D);e.dasin(-e.dsin(T)*e.dcos(P)*e.dsin(R)-e.dsin(P)*e.dcos(R));return n=90>z?90-z:450-z,a=n>90&&270>n?180-n:90>n?0-n:360-n,i.Angle.fromDegrees(a)},e.calc_Moon_IlluminatedDiscFraction=function(t){var n=t.centuriesSinceJ2000,a=n*n,i=n*a,r=e.calc_Earth_OrbitEccentricity(n),o=e.calc_Sun_MeanAnomaly(n,a,i),s=e.calc_Sun_EqOfCenter(n,o),c=e.calc_Sun_TrueAnomaly(n,o,s),u=e.calc_Sun_Earth_Distance(n,r,o,s,c),l=e.calc_Sun_LongitudeOfAscendingNode(n,a,i),d=e.calc_Sun_MeanLongitude(n),f=e.calc_Sun_TrueLong(n,d,s),h=e.calc_Sun_ApparentLong(n,f,l),g=e.calc_Moon_MeanAnomaly(n,a,i),p=e.calc_Moon_MeanElongation(n,a,i),y=e.calc_Moon_Earth_Distance(g,p),M=e.calc_Moon_Sun_DistanceRatio(y,u),m=e.calc_Moon_ArgumentOfLatitude(n,a,i),_=e.calc_Moon_GeocentricLatitude(m,g,p),b=e.calc_Moon_MeanLongitude(n),D=e.calc_Moon_GeocentricLongitude(g,p,b,m,o),S=e.calc_Moon_HeliocentricLatitude(M,_),v=e.calc_Moon_HeliocentricLongitude(h,M,S,D),A=1.54242,P=e.normalize(v-l),O=e.dcos(P)*e.dcos(S),R=e.dsin(P)*e.dcos(S)*e.dcos(A)-e.dsin(S)*e.dsin(A),T=(e.normalize(e.datan2(R,O)-m),
e.dasin(-e.dsin(P)*e.dcos(S)*e.dsin(A)-e.dsin(S)*e.dcos(A)),e.dcos(_)*e.dcos(D-h)),E=90-e.datan(T/Math.sqrt(1-T*T));R=u*e.dsin(E),O=M-u*T;var w=e.datan2(R,O);return(1+e.dcos(w))/2},e.calc_Ecliptic_NutationInLongitude=function(e,t,n,a,i,r){var o=t,s=n,c=a,u=i,l=r,d=-(171996+174.2*e)*Math.sin(o)-(13187+1.6*e)*Math.sin(-2*s+2*c+2*o)-(2274+.2*e)*Math.sin(2*c+2*o)+(2062+.2*e)*Math.sin(2*o)+(1426-3.4*e)*Math.sin(u)+(712+.1*e)*Math.sin(l);return d+=(-517+1.2*e)*Math.sin(-2*s+u+2*c+2*o)-(386+.4*e)*Math.sin(2*c+o)-301*Math.sin(l+2*c+2*o)+(217-.5*e)*Math.sin(-2*s-u+2*c+2*o)-158*Math.sin(-2*s+l),d+=(129+.1*e)*Math.sin(-2*s+2*c+o)+123*Math.sin(-l+2*c+2*o)+63*Math.sin(2*s)+(63+.1*e)*Math.sin(l+o)-59*Math.sin(2*s-l+2*c+2*o)-(58+.1*e)*Math.sin(-l+o),d-=51*Math.sin(l+2*c+o),d+=48*Math.sin(-2*s+2*l)+46*Math.sin(-2*l+2*c+o)-38*Math.sin(2*s+2*c+2*o)-31*Math.sin(2*l+2*c+2*o)+29*Math.sin(2*l)+29*Math.sin(-2*s+l+2*c+2*o)+26*Math.sin(2*c),d-=22*Math.sin(2*c-2*s)+21*Math.sin(2*c-l)+(17-.1*e)*Math.sin(2*u)+16*Math.sin(2*s-l+o)-(16-.1*e)*Math.sin(2*(o+c+u-s))-15*Math.sin(u+o)-13*Math.sin(o+l-2*s)-12*Math.sin(o-u),d+=11*Math.sin(2*(l-c))-10*Math.sin(2*s-l+2*c)-8*Math.sin(2*s+l+2*c+2*o)+7*Math.sin(u+2*c+2*o)-7*Math.sin(u+l-2*s)-7*Math.sin(2*c+2*o-u)-7*Math.sin(2*s+2*c+o),d+=6*Math.sin(2*s+l),d+=6*Math.sin(2*(o+c+l-s))+6*Math.sin(o+2*c+l-2*s)-6*Math.sin(2*s-2*l+o)-6*Math.sin(2*s+o)+5*Math.sin(l-u)-5*Math.sin(o+2*c-u-2*s)-5*Math.sin(o-2*s)-5*Math.sin(o+2*c+2*l),d+=4*Math.sin(o-2*l-2*s)+4*Math.sin(o+2*c+u-2*s)+4*Math.sin(l-2*c)-4*Math.sin(l-s)-4*Math.sin(u-2*s)-4*Math.sin(s)+3*Math.sin(2*c+l)-3*Math.sin(2*(o+c-l))-3*Math.sin(l-u-s),d-=3*Math.sin(l+u),d-=3*Math.sin(2*o+2*c+l-u)-3*Math.sin(2*o+2*c-l-u+2*s)-3*Math.sin(2*o+2*c+3*l)-3*Math.sin(2*o+2*c-u+2*s),d*=1e-4/3600},e.calc_Ecliptic_MeanObliquityCorrection=function(e,t,n,a,i,r,o,s){var c=(92025+8.9*e)*Math.cos(a)+(5736-3.1*e)*Math.cos(-2*i+2*r+2*a)+(977-.5*e)*Math.cos(2*r+2*a)+(-895+.5*e)*Math.cos(2*a)+(54-.1*e)*Math.cos(o)-7*Math.cos(s);return c+=(224-.6*e)*Math.cos(-2*i+o+2*r+2*a)+200*Math.cos(2*r+a)+(129-.1*e)*Math.cos(s+2*r+2*a)+(-95+.3*e)*Math.cos(-2*i-o+2*r+2*a)-70*Math.cos(-2*i+2*r+a),c-=53*Math.cos(-s+2*r+2*a)-33*Math.cos(s+a)+26*Math.cos(2*i-s+2*r+2*a)+32*Math.cos(-s+a)+27*Math.cos(s+2*r+a)-24*Math.cos(-2*s+2*r+a),c+=16*Math.cos(2*(i+r+a))+13*Math.cos(2*(s+r+a))-12*Math.cos(2*a+2*r+s-2*i)-10*Math.cos(a+2*r-s)-8*Math.cos(2*i-s+a)+7*Math.cos(2*(a+r+o-i))+9*Math.cos(o+a),c+=7*Math.cos(a+s-2*i)+6*Math.cos(a-o)+5*Math.cos(a+2*r-s+2*i)+3*Math.cos(2*a+2*r+s+2*i)-3*Math.cos(2*a+2*r+o)+3*Math.cos(2*a+2*r-o)+3*Math.cos(a+2*r+2*i),c-=3*Math.cos(2*(a+r+s-i))-3*Math.cos(a+2*r+s-2*i)+3*Math.cos(a-2*s+2*i)+3*Math.cos(a+2*i)+3*Math.cos(a+2*r-o-2*i)+3*Math.cos(a-2*i)+3*Math.cos(a+2*r+2*s),c*=1e-4/3600},e.toGasDegrees=function(t){var n=t.daysSinceJ2000,a=n/36525,i=a*a,r=i*a,o=e.calc_Moon_MeanElongation(a,i,r)*e.D2R,s=e.calc_Sun_MeanAnomaly(a,i,r)*e.D2R,c=e.calc_Moon_MeanAnomaly(a,i,r)*e.D2R,u=e.calc_Moon_ArgumentOfLatitude(a,i,r)*e.D2R,l=e.calc_Sun_LongitudeOfAscendingNode(a,i,r)*e.D2R,d=e.calc_Ecliptic_NutationInLongitude(a,l,o,u,s,c),f=e.calc_Ecliptic_MeanObliquity(a,i,r)+e.calc_Ecliptic_MeanObliquityCorrection(a,i,r,l,o,u,s,c),h=280.46061837+360.98564736629*n+387933e-9*i-r/3871e4;return h+=d*Math.cos(f*e.D2R),h=e.normalize(h)},e.correctForRefraction=function(t){var n=t;n instanceof i.Angle&&(n=n.degrees);var a=1/Math.tan((n+7.31/(n+4.4))*e.D2R);return a-=.06*Math.sin((14.7*a/60+13)*e.D2R),a/=60,i.Angle.fromDegrees(n+a)},e.uncorrectRefraction=function(t){var n=t;n instanceof i.Angle&&(n=n.degrees);var a=1/Math.tan((n+7.31/(n+4.4))*e.D2R);return a-=.06*Math.sin((14.7*a/60+13)*e.D2R),a/=60,n-a},e.toTopocentric=function(t){var n=t;n instanceof i.Angle&&(n=n.degrees);var a=1e10,r=Math.atan(Math.cos(n*e.D2R)/(a-Math.sin(n*e.D2R))),o=n-r*e.R2D;return e.correctForRefraction(o)},e.toGeocentric=function(t){var n=t;n instanceof i.Angle&&(n=n.degrees),n=e.uncorrectRefraction(n);var a=1e10,r=Math.atan(Math.cos(n*e.D2R)/(a-Math.sin(n*e.D2R))),o=n+r*e.R2D;return i.Angle.fromDegrees(o)},e.toUnitVector=function(e){var t=e.declination.radians,n=e.rightAscension.radians,a=[];return a.push(Math.cos(t)*Math.cos(n)),a.push(Math.cos(t)*Math.sin(n)),a.push(Math.sin(t)),a},e.fromUnitVector=function(e){var t=Math.atan2(e[1],e[0]),n=Math.asin(e[2]);return new d.EquatorialCoordinates(i.Angle.fromRadians(t),i.Angle.fromRadians(n))},e.precesionMatrixParams=function(e){var t=e.centuriesSinceJ2000,n=t*t,a=n*t,i=.011180860865024398*t+14635555405334672e-22*n+Math.pow(8.72567663260943,-8)*a,r=.011180860865024398*t+5307158404369869e-21*n+Math.pow(8.825063437236881,-8)*a,o=.009717173455169672*t+2068457570453835e-21*n+Math.pow(2.0281210721855225,-7)*a;return{p00:Math.cos(r)*Math.cos(o)*Math.cos(i)-Math.sin(r)*Math.sin(i),p01:-Math.cos(r)*Math.cos(o)*Math.sin(i)-Math.sin(r)*Math.cos(i),p02:-Math.cos(r)*Math.sin(o),p10:Math.sin(r)*Math.cos(o)*Math.cos(i)+Math.cos(r)*Math.sin(i),p11:-Math.sin(r)*Math.cos(o)*Math.sin(i)+Math.cos(r)*Math.cos(i),p12:-Math.sin(r)*Math.sin(o),p20:Math.sin(o)*Math.cos(i),p21:-Math.sin(o)*Math.sin(i),p22:Math.cos(o)}},e.determinant3x3=function(e){var t=e[0][0]*e[1][1]*e[2][2]-e[0][0]*e[1][2]*e[2][1]-e[0][1]*e[1][0]*e[2][2]+e[0][1]*e[1][2]*e[2][0]+e[0][2]*e[1][0]*e[2][1]-e[0][2]*e[1][1]*e[2][0];return t},e.inverse3x3=function(t){var n=e.determinant3x3(t);return[[(t[1][1]*t[2][2]-t[1][2]*t[2][1])/n,(t[0][2]*t[2][1]-t[0][1]*t[2][2])/n,(t[0][1]*t[1][2]-t[0][2]*t[1][1])/n],[(t[1][2]*t[2][0]-t[1][0]*t[2][2])/n,(t[0][0]*t[2][2]-t[0][2]*t[2][0])/n,(t[0][2]*t[1][0]-t[0][0]*t[1][2])/n],[(t[1][0]*t[2][1]-t[1][1]*t[2][0])/n,(t[0][1]*t[2][0]-t[0][0]*t[2][1])/n,(t[0][0]*t[1][1]-t[0][1]*t[1][0])/n]]},e.inversePrecesionMatrixAt=function(t){var n=e.precesionMatrixParams(t);return[[n.p00,n.p10,n.p20],[n.p01,n.p11,n.p21],[n.p02,n.p12,n.p22]]},e.precesionMatrixAt=function(t){var n=e.precesionMatrixParams(t);return[[n.p00,n.p01,n.p02],[n.p10,n.p11,n.p12],[n.p20,n.p21,n.p22]]},e.matrixTimesMatrix=function(e,t){return[[e[0][0]*t[0][0]+e[0][1]*t[1][0]+e[0][2]*t[2][0],e[0][0]*t[0][1]+e[0][1]*t[1][1]+e[0][2]*t[2][1],e[0][0]*t[0][2]+e[0][1]*t[1][2]+e[0][2]*t[2][2]],[e[1][0]*t[0][0]+e[1][1]*t[1][0]+e[1][2]*t[2][0],e[1][0]*t[0][1]+e[1][1]*t[1][1]+e[1][2]*t[2][1],e[1][0]*t[0][2]+e[1][1]*t[1][2]+e[1][2]*t[2][2]],[e[2][0]*t[0][0]+e[2][1]*t[1][0]+e[2][2]*t[2][0],e[2][0]*t[0][1]+e[2][1]*t[1][1]+e[2][2]*t[2][1],e[2][0]*t[0][2]+e[2][1]*t[1][2]+e[2][2]*t[2][2]]]},e.matrixTimesVector=function(e,t){return[e[0][0]*t[0]+e[0][1]*t[1]+e[0][2]*t[2],e[1][0]*t[0]+e[1][1]*t[1]+e[1][2]*t[2],e[2][0]*t[0]+e[2][1]*t[1]+e[2][2]*t[2]]},e.fromJ2000=function(t,n){var a=e.toUnitVector(t),i=e.precesionMatrixAt(n),r=e.matrixTimesVector(i,a);return e.fromUnitVector(r)},e.toJ2000=function(t,n){var a=e.toUnitVector(t),i=e.inversePrecesionMatrixAt(n),r=e.matrixTimesVector(i,a);return e.fromUnitVector(r)},e.toEpoch=function(t,n){var a=n.centuriesSinceJ2000,r=a*a,o=a*r,s=2306.2181*a+.30188*r+.017998*o;s*=e.D2R/3600;var c=2306.2181*a+1.09468*r+.018203*o;c*=e.D2R/3600;var u=2004.3109*a-.42665*r-.041833*o;u*=e.D2R/3600;var l=t.rightAscension.radians,f=t.declination.radians,h=Math.cos(f)*Math.sin(l+s),g=Math.cos(u)*Math.cos(f)*Math.cos(l+s)-Math.sin(u)*Math.sin(f),p=Math.atan2(h,g)+c;0>p?p+=e.PI2:p>e.PI2&&(p-=e.PI2),p*=e.R2D;var y=Math.acos(Math.sqrt(h*h+g*g));return 0>y*f&&(y=-y),y*=e.R2D,new d.EquatorialCoordinates(i.Angle.fromDegrees(p),i.Angle.fromDegrees(y))},e.calc_SunriseOrSunset_UTC=function(t,n,a,i){var r=n.centuriesSinceJ2000,o=e.calc_EquationOfTime(r),s=e.calc_Sun_Declination(r),c=e.calcHourAngleSunriseOrSunset(t,a.latitude.degrees,s,i),u=a.longitude.degrees+e.R2D*c,l=720-4*u-o;return l},e.prepareJd=function(e){var t;if(e instanceof Date)t=r.UtcDate.fromDate(e);else{if(!(e instanceof r.UtcDate))throw"date";t=e}return t},e.calc_SunriseOrSunset=function(t,n,a,i){var o=n.toDate(),s=new r.UtcDate(r.UtcDate.toUtcDays(o.getFullYear(),o.getMonth(),o.getDate())),c=-o.getTimezoneOffset()/60,u=e.isDaylightSavingsTime(o),l=a.latitude.degrees,d=a.longitude.degrees,f=e.calc_SunriseOrSunset_UTC(t,s,a,i),h=e.calc_SunriseOrSunset_UTC(t,s.addMinutes(f),a,i);if("number"==typeof h){var g=h;if(g>=0&&1440>g)return s.addMinutes(g);for(var p=s.days,y=0>g?1:-1;0>g||g>=1440;)g+=1440*y,p-=y;return new r.UtcDate(p).addMinutes(g)}var M=e.calcDoyFromJD(s.days);if(l>66.4&&M>79&&267>M||-66.4>l&&(83>M||M>263)){var m;throw m=t?e.calc_JDofNextPrevRiseSet(0,t,s.days,l,d,c,u):e.calc_JDofNextPrevRiseSet(1,t,s.days,l,d,c,u),"notimplementedyet"}throw m=1==t?e.calc_JDofNextPrevRiseSet(1,t,s.days,l,d,c,u):e.calc_JDofNextPrevRiseSet(0,t,s.days,l,d,c,u),"notimplementedyet"},e.calc_JDofNextPrevRiseSet=function(t,n,a,i,r,o,s){for(var c=a,u=t?1:-1,l=e.calc_SunriseOrSunset_UTC(n,c,i,r);"number"!=typeof l;)c+=u,l=e.calc_SunriseOrSunset_UTC(n,c,i,r);for(var d=l+60*o+(s?60:0);0>d||d>=1440;){var f=0>d?1:-1;d+=1440*f,c-=f}return c},e.isLeapYear=function(e){return e%4==0&&e%100!=0||e%400==0},e.calcDoyFromJD=function(t){var n=Math.floor(t+.5),a=t+.5-n;if(2299161>n)var i=n;else var r=Math.floor((n-1867216.25)/36524.25),i=n+1+r-Math.floor(r/4);var o=i+1524,s=Math.floor((o-122.1)/365.25),c=Math.floor(365.25*s),u=Math.floor((o-c)/30.6001),l=o-c-Math.floor(30.6001*u)+a,d=14>u?u-1:u-13,f=d>2?s-4716:s-4715,h=e.isLeapYear(f)?1:2,g=Math.floor(275*d/9)-h*Math.floor((d+9)/12)+l-30;return g},e.calcSunRa=function(t,n,a){var i=n||e.calc_Ecliptic_ObliquityCorrection(t),r=a||e.calc_Sun_ApparentLong(t),o=Math.cos(e.D2R*i)*Math.sin(e.D2R*r),s=Math.cos(e.D2R*r),c=e.R2D*Math.atan2(o,s);return c},e.calc_Sun_Declination=function(t,n,a){var i=n||e.calc_Ecliptic_ObliquityCorrection(t),r=a||e.calc_Sun_ApparentLong(t),o=Math.sin(e.D2R*i)*Math.sin(e.D2R*r),s=e.R2D*Math.asin(o);return s},e.calc_EquationOfTime=function(t,n,a,i,r){var o=n||e.calc_Ecliptic_ObliquityCorrection(t),s=a||e.calc_Sun_MeanLongitude(t),c=i||e.calc_Earth_OrbitEccentricity(t),u=r||e.calc_Sun_MeanAnomaly(t),l=Math.tan(e.D2R*o/2);l*=l;var d=Math.sin(2*e.D2R*s),f=Math.sin(e.D2R*u),h=Math.cos(2*e.D2R*s),g=Math.sin(4*e.D2R*s),p=Math.sin(2*e.D2R*u),y=l*d-2*c*f+4*c*l*f*h-.5*l*l*g-1.25*c*c*p;return y=e.R2D*y*4},e.getHRadians=function(e){var t=0;switch(e){case h.Astronomical:t=18;break;case h.Nautical:t=12;break;case h.Civil:t=6;break;case h.Official:t=.833;break;default:throw"twilight"}return t+=90},e.calcHourAngleSunriseOrSunset=function(t,n,a,i){var r=e.D2R*n,o=e.D2R*a,s=e.getHRadians(i),c=Math.cos(e.D2R*s)/(Math.cos(r)*Math.cos(o))-Math.tan(r)*Math.tan(o),u=Math.acos(c);return t?u:-u},e.isDaylightSavingsTime=function(e){var t=new Date(e.getFullYear(),0,1),n=new Date(e.getFullYear(),6,1),a=Math.max(t.getTimezoneOffset(),n.getTimezoneOffset());return e.getTimezoneOffset()<a},e.calcAzEl=function(t,n,a,i,r){for(var o=e.calc_EquationOfTime(t),s=e.calc_Sun_Declination(t),c=o+4*i-60*r,u=(e.calcSunRadVector(t),n+c);u>1440;)u-=1440;var l=u/4-180;-180>l&&(l+=360);var d=e.D2R*l,f=Math.sin(e.D2R*a)*Math.sin(e.D2R*s)+Math.cos(e.D2R*a)*Math.cos(e.D2R*s)*Math.cos(d);f>1?f=1:-1>f&&(f=-1);var h=e.R2D*Math.acos(f),g=Math.cos(e.D2R*a)*Math.sin(e.D2R*h);if(Math.abs(g)>.001){var p=(Math.sin(e.D2R*a)*Math.cos(e.D2R*h)-Math.sin(e.D2R*s))/g;Math.abs(p)>1&&(p=0>p?-1:1);var y=180-e.R2D*Math.acos(p);l>0&&(y=-y)}else y=a>0?180:0;0>y&&(y+=360);var M=90-h;if(M>85)var m=0;else{var _=Math.tan(e.D2R*M);if(M>5)var m=58.1/_-.07/(_*_*_)+86e-6/(_*_*_*_*_);else if(M>-.575)var m=1735+M*(-518.2+M*(103.4+M*(-12.79+.711*M)));else var m=-20.774/_;m/=3600}return y},e.PI=Math.PI,e.PI2=2*Math.PI,e.D2R=Math.PI/180,e.R2D=180/Math.PI,e.MinsPerAU=8.3168775,e.TaiToTtOffsetSeconds=32.184,e.LeapSeconds=[{utcdays:2457204.5,taiutc:{p1:36,p2:41317,p3:0}},{utcdays:2456109.5,taiutc:{p1:35,p2:41317,p3:0}},{utcdays:2454832.5,taiutc:{p1:34,p2:41317,p3:0}},{utcdays:2453736.5,taiutc:{p1:33,p2:41317,p3:0}},{utcdays:2451179.5,taiutc:{p1:32,p2:41317,p3:0}},{utcdays:2450630.5,taiutc:{p1:31,p2:41317,p3:0}},{utcdays:2450083.5,taiutc:{p1:30,p2:41317,p3:0}},{utcdays:2449534.5,taiutc:{p1:29,p2:41317,p3:0}},{utcdays:2449169.5,taiutc:{p1:28,p2:41317,p3:0}},{utcdays:2448804.5,taiutc:{p1:27,p2:41317,p3:0}},{utcdays:2448257.5,taiutc:{p1:26,p2:41317,p3:0}},{utcdays:2447892.5,taiutc:{p1:25,p2:41317,p3:0}},{utcdays:2447161.5,taiutc:{p1:24,p2:41317,p3:0}},{utcdays:2446247.5,taiutc:{p1:23,p2:41317,p3:0}},{utcdays:2445516.5,taiutc:{p1:22,p2:41317,p3:0}},{utcdays:2445151.5,taiutc:{p1:21,p2:41317,p3:0}},{utcdays:2444786.5,taiutc:{p1:20,p2:41317,p3:0}},{utcdays:2444239.5,taiutc:{p1:19,p2:41317,p3:0}},{utcdays:2443874.5,taiutc:{p1:18,p2:41317,p3:0}},{utcdays:2443509.5,taiutc:{p1:17,p2:41317,p3:0}},{utcdays:2443144.5,taiutc:{p1:16,p2:41317,p3:0}},{utcdays:2442778.5,taiutc:{p1:15,p2:41317,p3:0}},{utcdays:2442413.5,taiutc:{p1:14,p2:41317,p3:0}},{utcdays:2442048.5,taiutc:{p1:13,p2:41317,p3:0}},{utcdays:2441683.5,taiutc:{p1:12,p2:41317,p3:0}},{utcdays:2441499.5,taiutc:{p1:11,p2:41317,p3:0}},{utcdays:2441317.5,taiutc:{p1:10,p2:41317,p3:0}},{utcdays:2439887.5,taiutc:{p1:4.21317,p2:39126,p3:.002592}},{utcdays:2439126.5,taiutc:{p1:4.31317,p2:39126,p3:.002592}},{utcdays:2439004.5,taiutc:{p1:3.84013,p2:38761,p3:.001296}},{utcdays:2438942.5,taiutc:{p1:3.74013,p2:38761,p3:.001296}},{utcdays:2438820.5,taiutc:{p1:3.64013,p2:38761,p3:.001296}},{utcdays:2438761.5,taiutc:{p1:3.54013,p2:38761,p3:.001296}},{utcdays:2438639.5,taiutc:{p1:3.44013,p2:38761,p3:.001296}},{utcdays:2438486.5,taiutc:{p1:3.34013,p2:38761,p3:.001296}},{utcdays:2438395.5,taiutc:{p1:3.24013,p2:38761,p3:.001296}},{utcdays:2438334.5,taiutc:{p1:1.945858,p2:37665,p3:.0011232}},{utcdays:2437665.5,taiutc:{p1:1.845858,p2:37665,p3:.0011232}},{utcdays:2437512.5,taiutc:{p1:1.372818,p2:37300,p3:.001296}},{utcdays:2437300.5,taiutc:{p1:1.422818,p2:37300,p3:.001296}}],e}();return e.MeeusEngine=g,n.define=a,t.exports}),System.register("sybilla/datetime/utcdate",["sybilla/core/meeusEngine"],!0,function(require,e,t){var n=System.global,a=n.define;n.define=void 0;var i=require("sybilla/core/meeusEngine"),r=function(){function e(t){void 0===t?this._days=e.getJulianDays(new Date):this._days=t}return Object.defineProperty(e.prototype,"days",{get:function(){return this._days},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"daysSinceJ2000",{get:function(){return this._days-2451545},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centuriesSinceJ2000",{get:function(){return this.daysSinceJ2000/36525},enumerable:!0,configurable:!0}),Object.defineProperty(e,"J2000",{get:function(){return new e(2451545)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"B1950",{get:function(){return new e(2433282.4229166666)},enumerable:!0,configurable:!0}),e.prototype.addDays=function(t){return new e(this.days+t)},e.prototype.addHours=function(t){return new e(this.days+t/24)},e.prototype.addMinutes=function(t){return new e(this.days+t/1440)},e.prototype.addSeconds=function(t){return new e(this.days+t/86400)},e.prototype.addMilliseconds=function(t){return new e(this.days+t/864e5)},e.prototype.toDate=function(){var e,t,n,a,i,r,o,s,c,u=this.days;s=u+.5,c=Math.floor(s),s-=c,2299161>c?n=c:(n=Math.floor((c-1867216.25)/36524.25),n=c+1+n-Math.floor(n/4)),a=n+1524,i=Math.floor((a-122.1)/365.25),r=Math.floor(365.25*i),o=Math.floor((a-r)/30.6);var l=a-r-Math.floor(30.6001*o)+s;t=o>13?0|o-13:0|o-1,e=1==t||2==t?0|i-4715:0|i-4716;var d=24*(l-(0|l)),f=new Date(e,t-1,0|l);return new Date(f.getTime()+6e4*(60*d-f.getTimezoneOffset()))},e.prototype.toLmsTime=function(e){return i.MeeusEngine.toLmsTime(this,e)},e.prototype.toGmsTime=function(){return i.MeeusEngine.toGmsTime(this)},e.prototype.toLasTime=function(e){return i.MeeusEngine.toLasTime(this,e)},e.prototype.toGasTime=function(){return i.MeeusEngine.toGasTime(this)},e.prototype.toTaiDate=function(){return i.MeeusEngine.toTaiDate(this)},e.prototype.toTtDate=function(){return i.MeeusEngine.toTtDate(this)},e.prototype.toHjdDate=function(e,t){return i.MeeusEngine.toHjdDate(this,e,t)},e.fromDate=function(t){return new e(e.getJulianDays(t))},e.fromJ2000Centuries=function(t){return new e(36525*t+2451545)},e.isJulianCalendar=function(e,t,n){if(1582>e)return!0;if(e>1582)return!1;if(10>t)return!0;if(t>10)return!1;if(5>n)return!0;if(n>14)return!1;throw"This date is not valid as it does not exist in either the Julian or the Gregorian calendars."},e.getJulianDays=function(t){var n=t.getUTCFullYear(),a=t.getUTCMonth(),i=t.getUTCDate(),r=t.getUTCHours(),o=t.getUTCMinutes(),s=t.getUTCSeconds(),c=t.getUTCMilliseconds();return e.toUtcDays(n,a,i,r,o,s,c)},e.toUtcDays=function(t,n,a,i,r,o,s){n+=1,i=i||0,r=r||0,o=o||0,s=s||0;var c=e.isJulianCalendar(t,n,a),u=n>2?n:n+12,l=n>2?t:t-1,d=Math.floor(l/100),f=Math.floor(30.6001*(u+1)),h=c?0:2-d+Math.floor(d/4),g=Math.floor(365.25*(l+4716));return h+g+f-1524.5+a+i/24+r/1440+(o+s/1e3)/86400},e}();return e.UtcDate=r,n.define=a,t.exports}),System.register("sybilla/solarSystem/moon",["sybilla/datetime/utcdate","sybilla/core/meeusEngine"],!0,function(require,e,t){var n=System.global,a=n.define;n.define=void 0;var i=require("sybilla/datetime/utcdate"),r=require("sybilla/core/meeusEngine"),o=function(){function e(){}return e.positionAt=function(e){var t=e;return t instanceof Date&&(t=i.UtcDate.fromDate(e)),r.MeeusEngine.moonPositionAt(t)},e.terminatorLongitudeAt=function(e){var t=e;return t instanceof Date&&(t=i.UtcDate.fromDate(e)),r.MeeusEngine.calc_Moon_LongitudeOfTerminator(t)},e.illuminatedDiscFractionAt=function(e){var t=e;return t instanceof Date&&(t=i.UtcDate.fromDate(e)),r.MeeusEngine.calc_Moon_IlluminatedDiscFraction(t)},e}();return e.Moon=o,n.define=a,t.exports}),System.register("sybilla/meeus",["sybilla/angle","sybilla/solarSystem/moon","sybilla/solarSystem/earth","sybilla/solarSystem/sun","sybilla/datetime/hjddate","sybilla/datetime/siderealtimes","sybilla/datetime/taidate","sybilla/datetime/ttdate","sybilla/datetime/utcdate","sybilla/coordinateSystems/eclipticCoordinates","sybilla/coordinateSystems/equatorialCoordinates","sybilla/coordinateSystems/geographicCoordinates","sybilla/coordinateSystems/horizontalCoordinates","sybilla/core/meeusEngine"],!0,function(require,e,t){function n(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}var a=System.global,i=a.define;return a.define=void 0,n(require("sybilla/angle")),n(require("sybilla/solarSystem/moon")),n(require("sybilla/solarSystem/earth")),n(require("sybilla/solarSystem/sun")),n(require("sybilla/datetime/hjddate")),n(require("sybilla/datetime/siderealtimes")),n(require("sybilla/datetime/taidate")),n(require("sybilla/datetime/ttdate")),n(require("sybilla/datetime/utcdate")),n(require("sybilla/coordinateSystems/eclipticCoordinates")),n(require("sybilla/coordinateSystems/equatorialCoordinates")),n(require("sybilla/coordinateSystems/geographicCoordinates")),n(require("sybilla/coordinateSystems/horizontalCoordinates")),n(require("sybilla/core/meeusEngine")),a.define=i,t.exports});
//# sourceMappingURL=meeus.min.js.map
