/**
  @license
  Dual-licensed: https://github.com/sybilla/meeus/blob/master/LICENSE.txt
 **/
(function(k){"object"===typeof exports&&"undefined"!==typeof module?module.exports=k():"function"===typeof define&&define.amd?define([],k):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).meeus=k()})(function(){return function(){function k(n,l,e){function h(d,a){if(!l[d]){if(!n[d]){var p="function"==typeof require&&require;if(!a&&p)return p(d,!0);if(g)return g(d,!0);p=Error("Cannot find module '"+d+"'");throw p.code="MODULE_NOT_FOUND",p;}p=
l[d]={exports:{}};n[d][0].call(p.exports,function(a){return h(n[d][1][a]||a)},p,p.exports,k,n,l,e)}return l[d].exports}for(var g="function"==typeof require&&require,a=0;a<e.length;a++)h(e[a]);return h}return k}()({1:[function(k,n,l){(function(d){d[d.Hour=0]="Hour";d[d.Degree=1]="Degree";d[d.Radian=2]="Radian"})(l.AngleStyle||(l.AngleStyle={}));var e=l.AngleStyle;(function(d){d[d.Reflective=0]="Reflective";d[d.Periodic=1]="Periodic"})(l.AngleNormalization||(l.AngleNormalization={}));var h=l.AngleNormalization,
g=function(){function d(){}d.parse=function(a,g,e){return d.matchToAngle(d.match(a,g,e))};d.match=function(a,g,e){null!=a&&(a=a.trim().replace(/^[^(0-9|a-zA-Z|\-)]/,""));for(var h=null,k=0;k<d.RegexPatterns.length;k++){var b=(new RegExp(d.RegexPatterns[k],"g")).exec(a);if(null!=b){void 0===e&&(a=g[k],e=void 0!==a?a:d.RegexPatternStyleMap[k]);h={match:b,style:e};break}}if(null==h)throw"s";return h};d.matchToAngle=function(d){var g=d.match[2];g&&(g=g.replace(",","."));var h=parseFloat(g);isNaN(h)&&
(h=0);(g=d.match[4])&&(g=g.replace(",","."));var k=parseFloat(g);isNaN(k)&&(k=0);(g=d.match[6])&&(g=g.replace(",","."));g=parseFloat(g);isNaN(g)&&(g=0);switch(d.style){case e.Hour:h=a.fromHours(h,k,g);break;case e.Degree:h=a.fromDegrees(h,k,g);break;case e.Radian:h=a.fromRadians(h);break;default:throw"style";}"-"===d.match[1]&&(h=h.negative());return h};d.RegexPatterns="^d ([+-])?(\\d{1,3}):( )?(\\d{1,2}):( )?(\\d{1,2}([\\.,]\\d+)?);^([+-])?(\\d{1,3}):( )?(\\d{1,2}):( )?(\\d{1,2}([\\.,]\\d+)?);^d ([+-])?(\\d{1,3})() (\\d{1,2})() (\\d{1,2}([\\.,]\\d+)?);^([+-])?(\\d{1,3})() (\\d{1,2})() (\\d{1,2}([\\.,]\\d+)?);^([+-])?(\\d{1,3})h( )?(\\d{1,2})m( )?(\\d{1,2}([\\.,]\\d+)?)[s]?;^([+-])?(\\d{1,3})d( )?(\\d{1,2})m( )?(\\d{1,2}([\\.,]\\d+)?)[s]?;^([+-])?(\\d{1,3})[\u00b0*]( )?(\\d{1,2})'( )?(\\d{1,2}([\\.,]\\d+)?)[\"]?;^([a-zA-Z])(\\d{2})()(\\d{2})()(\\d{2}([\\.,]\\d+)?);^([+-])?(\\d{2})()(\\d{2}[\\.,]\\d+);^([+-])?(\\d{2})()(\\d{2})()(\\d{2}([\\.,]\\d+)?);^[d][ ]([+-])?(\\d{1,3}([\\.\\,]\\d+)?);^([+-])?(\\d{1,3}([\\.,]\\d+)?)".split(";");
d.RegexPatternStyleMap={0:e.Degree,1:e.Degree,2:e.Degree,3:e.Degree,4:e.Hour,5:e.Degree,6:e.Degree,7:e.Hour,8:e.Degree,9:e.Degree,10:e.Degree,11:e.Radian};return d}();l.AngleParser=g;var a=function(){function d(a){this._dms=a*d.DegreeMillisecondsInDegree}Object.defineProperty(d.prototype,"hours",{get:function(){return this._dms/(d.DegreeMillisecondsInMillisecond*d.DegreeMillisecondsInDegree)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hour",{get:function(){return 0|this.hours},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hourMinutes",{get:function(){return(0|this._dms/d.DegreeMillisecondsInMillisecond)%d.DegreeMillisecondsInDegree/d.DegreeMillisecondsInDegreeMinute},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hourMinute",{get:function(){return 0|this.hourMinutes},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hourSeconds",{get:function(){return(0|this._dms/d.DegreeMillisecondsInMillisecond)%d.DegreeMillisecondsInDegreeMinute/
d.DegreeMillisecondsInDegreeSecond},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hourSecond",{get:function(){return 0|this.hourSeconds},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hourMilliseconds",{get:function(){return(0|this._dms/d.DegreeMillisecondsInMillisecond)%d.DegreeMillisecondsInDegreeSecond},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hourMillisecond",{get:function(){return 0|this.hourMilliseconds},enumerable:!0,configurable:!0});
Object.defineProperty(d.prototype,"degrees",{get:function(){return this._dms/d.DegreeMillisecondsInDegree},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"degree",{get:function(){return 0|this.degrees},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"degreeMinutes",{get:function(){return(0|this._dms)%d.DegreeMillisecondsInDegree/d.DegreeMillisecondsInDegreeMinute},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"degreeMinute",{get:function(){return 0|
this.degreeMinutes},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"degreeSeconds",{get:function(){return(0|this._dms)%d.DegreeMillisecondsInDegreeMinute/d.DegreeMillisecondsInDegreeSecond},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"degreeSecond",{get:function(){return 0|this.degreeSeconds},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"degreeMilliseconds",{get:function(){return this._dms},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"degreeMillisecond",{get:function(){return 0|this.degreeMilliseconds},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"radians",{get:function(){return this.degrees*Math.PI/180},enumerable:!0,configurable:!0});d.prototype.addHours=function(a){return d.fromHours(this.hours+a)};d.prototype.addHourMinutes=function(a){return d.fromHours(this.hours,a)};d.prototype.addHourSeconds=function(a){return d.fromHours(this.hours,0,a)};d.prototype.addHourMilliseconds=function(a){return d.fromHours(this.hours,
0,0,a)};d.prototype.addDegrees=function(a){return d.fromDegrees(this.degrees+a)};d.prototype.addDegreeMinutes=function(a){return d.fromDegrees(this.degrees,a)};d.prototype.addDegreeSeconds=function(a){return d.fromDegrees(this.degrees,0,a)};d.prototype.addDegreeMilliseconds=function(a){return d.fromDegrees(this.degrees,0,0,a)};d.prototype.toFormattedString=function(a){a=a||{};var g=1,e="D",h=typeof a;"string"===h?e=a:"number"===h?g=a:(a.format=a.format||e,a.digits=null!=a.digits?a.digits:g,e=a.format,
g=a.digits);switch(e){case "H":return h=this.hourSeconds,a=this.hourMinute,e=this.hour,h=d.absPad(h,g),h=parseFloat(h),60<=h&&(h-=60,a+=1),60<=a&&(a-=60,e+=1),24<=e&&(e-=24),e+"h"+d.absPad(a)+"m"+d.absPad(h,g)+"s";case "D":a=0>this._dms?"-":"";var k=this.degreeSeconds,e=this.degreeMinute,h=this.degree,k=d.absPad(k,g),k=parseFloat(k);60<=k&&(k-=60,e+=1);60<=e&&(e-=60,h+=1);360<=h&&(h-=360);return a+Math.abs(h)+"\u00b0"+d.absPad(e)+"'"+d.absPad(k,g)+'"';case "R":return this.radians.toFixed(2).toString();
default:return""}};d.prototype.negative=function(){return d.fromDegrees(0,0,0,-this._dms)};d.prototype.normalize=function(a,d){a=a||0;d=void 0===d?h.Periodic:d;switch(d){case h.Reflective:return this.__normalizeReflective(a);case h.Periodic:return this.__normalizePeriodic(a);default:throw"normalization";}};d.prototype.__normalizeReflective=function(a){var g=a+180,e=this.__normalizeInternal(a-90);e<a?e=a+Math.min(Math.abs(e-a),Math.abs(e+a)):e>=g&&(e=g-Math.min(Math.abs(e-g),Math.abs(e+g)));return d.fromDegrees(e)};
d.prototype.__normalizePeriodic=function(a){return d.fromDegrees(this.__normalizeInternal(a))};d.prototype.__normalizeInternal=function(a){var d=this.degrees;a=(d-a)/360;0>a&&--a;return d-360*(0|a)};d.fromDegrees=function(a,g,e,h){a=(a||0)+(g||0)/60+(e||0)/3600+(h||0)/36E5;360<=Math.abs(a)&&(g=Math.floor(a),a-=g,a=g%360+a);return new d(a)};d.fromHours=function(a,g,e,h){a=(a||0)+(g||0)/60+(e||0)/3600+(h||0)/36E5;24<=Math.abs(a)&&(g=Math.floor(a),a-=g,a=g%24+a);return new d(a*d.DegreeMillisecondsInMillisecond)};
d.fromRadians=function(a){return d.fromDegrees(180*(a||0)/Math.PI)};d.parse=function(a,d){return g.parse(a,g.RegexPatternStyleMap,d)};d.absPad=function(a,d){d=d||0;var g=(10>a&&-10<a?"0":"")+(0<d?Math.abs(a).toFixed(d+1):Math.abs(a).toFixed(d));0<d&&(g=g.substr(0,d+3));return g};d.DegreeMillisecondsInDegree=36E5;d.DegreeMillisecondsInDegreeMinute=6E4;d.DegreeMillisecondsInDegreeSecond=1E3;d.DegreeMillisecondsInMillisecond=15;return d}();l.Angle=a},{}],2:[function(k,n,l){var e=k("../angle");k=function(){function h(g,
a){this.latitude=g;this.longitude=a}Object.defineProperty(h.prototype,"latitude",{get:function(){return this._lat},set:function(g){this._lat=g.normalize(-90,e.AngleNormalization.Reflective)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"longitude",{get:function(){return this._lon},set:function(g){this._lon=g.normalize(-180)},enumerable:!0,configurable:!0});h.prototype.toFormattedString=function(g){g=g||{};null==g.digits&&(g.digits=1);return this.latitude.toFormattedString({format:"D",
digits:g.digits})+" "+this.longitude.toFormattedString({format:"D",digits:g.digits})};h.parse=function(g,a,d){a=e.AngleParser.match(g,h.RegexPatternStyleMap,a);if(!a.match)throw"s";var k=e.AngleParser.matchToAngle(a);g=g.substr(g.indexOf(a.match[0])+a.match[0].length);a=e.AngleParser.match(g,h.RegexPatternStyleMap,d);if(!a.match)throw"s";d=e.AngleParser.matchToAngle(a);g.substr(g.indexOf(a.match[0])+a.match[0].length).trim();return new h(k,d)};h.RegexPatternStyleMap={7:e.AngleStyle.Degree,11:e.AngleStyle.Degree};
return h}();l.EclipticCoordinates=k},{"../angle":1}],3:[function(k,n,l){var e=k("../angle"),h=k("../engine/meeusEngine");k=function(){function g(a,d){this.rightAscension=a;this.declination=d}Object.defineProperty(g.prototype,"rightAscension",{get:function(){return this._ra},set:function(a){this._ra=a.normalize()},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"declination",{get:function(){return this._dec},set:function(a){this._dec=a.normalize(-90,e.AngleNormalization.Reflective)},
enumerable:!0,configurable:!0});g.prototype.toHorizontalCoordinates=function(a,d){return h.MeeusEngine.toHorizontalCoordinates(this,a,d)};g.prototype.toFormattedString=function(a){a=a||{};null==a.digits&&(a.digits=1);return this.rightAscension.toFormattedString({format:"H",digits:a.digits})+" "+this.declination.toFormattedString({format:"D",digits:a.digits})};g.parse=function(a,d,h){var k=e.AngleParser.match(a,g.RaPatternStyleMap,d);if(!k.match)throw"s";d=e.AngleParser.matchToAngle(k);a=a.substr(a.indexOf(k.match[0])+
k.match[0].length);k=e.AngleParser.match(a,g.DecPatternStyleMap,h);if(!k.match)throw"s";a=e.AngleParser.matchToAngle(k);return new g(d,a)};g.RaPatternStyleMap={1:e.AngleStyle.Hour,3:e.AngleStyle.Hour,8:e.AngleStyle.Hour,9:e.AngleStyle.Hour,11:e.AngleStyle.Hour};g.DecPatternStyleMap={7:e.AngleStyle.Degree,11:e.AngleStyle.Degree};return g}();l.EquatorialCoordinates=k},{"../angle":1,"../engine/meeusEngine":11}],4:[function(k,n,l){var e=k("../angle"),h=k("../engine/meeusEngine");k=function(){function g(a,
d,g){this.latitude=a;this.longitude=d;this._alt=g||0}Object.defineProperty(g.prototype,"latitude",{get:function(){return this._lat},set:function(a){this._lat=a.normalize(-90,e.AngleNormalization.Reflective)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"longitude",{get:function(){return this._lon},set:function(a){this._lon=a.normalize(-180)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"altitude",{get:function(){return this._alt},enumerable:!0,configurable:!0});
g.prototype.sunrise=function(a,d){return h.MeeusEngine.getSunriseAt(this,a,d)};g.prototype.sunset=function(a,d){return h.MeeusEngine.getSunsetAt(this,a,d)};g.prototype.toFormattedString=function(a){a=a||{};null==a.digits&&(a.digits=1);return this.latitude.toFormattedString({format:"D",digits:a.digits})+" "+this.longitude.toFormattedString({format:"D",digits:a.digits})+" "+this.altitude};g.parse=function(a,d,h){var k=e.AngleParser.match(a,g.RegexPatternStyleMap,d);if(!k.match)throw"s";d=e.AngleParser.matchToAngle(k);
a=a.substr(a.indexOf(k.match[0])+k.match[0].length);k=e.AngleParser.match(a,g.RegexPatternStyleMap,h);if(!k.match)throw"s";h=e.AngleParser.matchToAngle(k);a=a.substr(a.indexOf(k.match[0])+k.match[0].length).trim();a=parseFloat(a);isNaN(a)&&(a=0);return new g(d,h,a)};g.RegexPatternStyleMap={7:e.AngleStyle.Degree,11:e.AngleStyle.Degree};return g}();l.GeographicCoordinates=k},{"../angle":1,"../engine/meeusEngine":11}],5:[function(k,n,l){var e=k("../angle"),h=k("../engine/meeusEngine");k=function(){function g(a,
d){this.altitude=a;this.azimuth=d}Object.defineProperty(g.prototype,"altitude",{get:function(){return this._alt},set:function(a){this._alt=a.normalize(-90,e.AngleNormalization.Reflective)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"azimuth",{get:function(){return this._az},set:function(a){this._az=a.normalize()},enumerable:!0,configurable:!0});g.prototype.toEquatorialCoordinates=function(a,d){return h.MeeusEngine.toEquatorialCoordinates(this,a,d)};g.prototype.toFormattedString=
function(a){a=a||{};null==a.digits&&(a.digits=1);return this.altitude.toFormattedString({format:"D",digits:a.digits})+" "+this.azimuth.toFormattedString({format:"D",digits:a.digits})};g.parse=function(a,d,h){var k=e.AngleParser.match(a,g.RegexPatternStyleMap,d);if(!k.match)throw"s";d=e.AngleParser.matchToAngle(k);a=a.substr(a.indexOf(k.match[0])+k.match[0].length);k=e.AngleParser.match(a,g.RegexPatternStyleMap,h);if(!k.match)throw"s";a=e.AngleParser.matchToAngle(k);return new g(d,a)};g.RegexPatternStyleMap=
{7:e.AngleStyle.Degree,11:e.AngleStyle.Degree};return g}();l.HorizontalCoordinates=k},{"../angle":1,"../engine/meeusEngine":11}],6:[function(k,n,l){k=function(){function e(e){this._days=e}Object.defineProperty(e.prototype,"days",{get:function(){return this._days},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"daysSinceJ2000",{get:function(){return this._days-2451545},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"centuriesSinceJ2000",{get:function(){return this.daysSinceJ2000/
36525},enumerable:!0,configurable:!0});e.prototype.addDays=function(h){return new e(this.days+h)};e.prototype.addHours=function(h){return new e(this.days+h/24)};e.prototype.addMinutes=function(h){return new e(this.days+h/1440)};e.prototype.addSeconds=function(h){return new e(this.days+h/86400)};e.prototype.addMilliseconds=function(h){return new e(this.days+h/864E5)};return e}();l.HjdDate=k},{}],7:[function(k,n,l){var e=this&&this.__extends||function(g,a){function d(){this.constructor=g}for(var e in a)a.hasOwnProperty(e)&&
(g[e]=a[e]);g.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d)},h=k("./utcdate");k=function(){function g(a){this._hours=a}Object.defineProperty(g.prototype,"hours",{get:function(){return this._hours},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"hour",{get:function(){return 0|this._hours},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"minutes",{get:function(){return 60*(this.hours-this.hour)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,
"minute",{get:function(){return 0|this.minutes},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"seconds",{get:function(){return 60*(this.minutes-this.minute)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"second",{get:function(){return 0|this.seconds},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"milliseconds",{get:function(){return 1E3*(this.seconds-this.second)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"millisecond",
{get:function(){return 0|this.milliseconds},enumerable:!0,configurable:!0});g.prototype.toFormattedString=function(){var a=Math.round(this.seconds),d=Math.round(this.minute),e=this.hour;60==a&&(d+=1,a=0);60<=d&&(e+=1,d-=60);return g.absPad(e)+":"+g.absPad(d)+":"+g.absPad(a)};g.absPad=function(a,d){var g=Math.abs(a).toFixed(d||0),e=parseFloat(g);return(10>e&&-10<e?"0":"")+g};return g}();l.__BaseTime=k;n=function(g){function a(){g.apply(this,arguments)}e(a,g);a.fromDate=function(a){return h.UtcDate.fromDate(a).toGmsTime()};
return a}(k);l.GmsTime=n;n=function(g){function a(){g.apply(this,arguments)}e(a,g);return a}(k);l.LmsTime=n;n=function(g){function a(){g.apply(this,arguments)}e(a,g);a.fromDate=function(a){return h.UtcDate.fromDate(a).toGasTime()};return a}(k);l.GasTime=n;k=function(g){function a(){g.apply(this,arguments)}e(a,g);return a}(k);l.LasTime=k},{"./utcdate":10}],8:[function(k,n,l){k=function(){function e(e){this._days=e}Object.defineProperty(e.prototype,"days",{get:function(){return this._days},enumerable:!0,
configurable:!0});Object.defineProperty(e.prototype,"daysSinceJ2000",{get:function(){return this._days-2451545},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"centuriesSinceJ2000",{get:function(){return this.daysSinceJ2000/36525},enumerable:!0,configurable:!0});e.prototype.addDays=function(h){return new e(this.days+h)};e.prototype.addHours=function(h){return new e(this.days+h/24)};e.prototype.addMinutes=function(h){return new e(this.days+h/1440)};e.prototype.addSeconds=function(h){return new e(this.days+
h/86400)};e.prototype.addMilliseconds=function(h){return new e(this.days+h/864E5)};return e}();l.TaiDate=k},{}],9:[function(k,n,l){k=function(){function e(e){this._days=e}Object.defineProperty(e.prototype,"days",{get:function(){return this._days},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"daysSinceJ2000",{get:function(){return this._days-2451545},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"centuriesSinceJ2000",{get:function(){return this.daysSinceJ2000/
36525},enumerable:!0,configurable:!0});e.prototype.addDays=function(h){return new e(this.days+h)};e.prototype.addHours=function(h){return new e(this.days+h/24)};e.prototype.addMinutes=function(h){return new e(this.days+h/1440)};e.prototype.addSeconds=function(h){return new e(this.days+h/86400)};e.prototype.addMilliseconds=function(h){return new e(this.days+h/864E5)};return e}();l.TtDate=k},{}],10:[function(k,n,l){var e=k("../engine/meeusEngine");k=function(){function h(e){this._days=void 0===e?h.getJulianDays(new Date):
e}Object.defineProperty(h.prototype,"days",{get:function(){return this._days},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"daysSinceJ2000",{get:function(){return this._days-2451545},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"centuriesSinceJ2000",{get:function(){return this.daysSinceJ2000/36525},enumerable:!0,configurable:!0});Object.defineProperty(h,"J2000",{get:function(){return new h(2451545)},enumerable:!0,configurable:!0});Object.defineProperty(h,
"B1950",{get:function(){return new h(2433282.4229166666)},enumerable:!0,configurable:!0});h.prototype.addDays=function(e){return new h(this.days+e)};h.prototype.addHours=function(e){return new h(this.days+e/24)};h.prototype.addMinutes=function(e){return new h(this.days+e/1440)};h.prototype.addSeconds=function(e){return new h(this.days+e/86400)};h.prototype.addMilliseconds=function(e){return new h(this.days+e/864E5)};h.prototype.toDate=function(){var e,a,d,h,k,l;l=this.days+.5;e=Math.floor(l);2299161>
e?a=e:(a=Math.floor((e-1867216.25)/36524.25),a=e+1+a-Math.floor(a/4));d=a+1524;a=Math.floor((d-122.1)/365.25);h=Math.floor(365.25*a);k=Math.floor((d-h)/30.6);l=d-h-Math.floor(30.6001*k)+(l-e);e=13<k?0|k-13:0|k-1;k=24*(l-(0|l));a=new Date(1==e||2==e?0|a-4715:0|a-4716,e-1,0|l);return new Date(a.getTime()+6E4*(60*k-a.getTimezoneOffset()))};h.prototype.toLmsTime=function(g){return e.MeeusEngine.toLmsTime(this,g)};h.prototype.toGmsTime=function(){return e.MeeusEngine.toGmsTime(this)};h.prototype.toLasTime=
function(g){return e.MeeusEngine.toLasTime(this,g)};h.prototype.toGasTime=function(){return e.MeeusEngine.toGasTime(this)};h.prototype.toTaiDate=function(){return e.MeeusEngine.toTaiDate(this)};h.prototype.toTtDate=function(){return e.MeeusEngine.toTtDate(this)};h.prototype.toHjdDate=function(g,a){return e.MeeusEngine.toHjdDate(this,g,a)};h.fromDate=function(e){return new h(h.getJulianDays(e))};h.fromJ2000Centuries=function(e){return new h(36525*e+2451545)};h.isJulianCalendar=function(e,a,d){if(1582>
e)return!0;if(1582<e)return!1;if(10>a)return!0;if(10<a)return!1;if(5>d)return!0;if(14<d)return!1;throw"This date is not valid as it does not exist in either the Julian or the Gregorian calendars.";};h.getJulianDays=function(e){var a=e.getUTCFullYear(),d=e.getUTCMonth(),k=e.getUTCDate(),l=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds();e=e.getUTCMilliseconds();return h.toUtcDays(a,d,k,l,n,r,e)};h.toUtcDays=function(e,a,d,k,l,n,r){a+=1;k=k||0;l=l||0;n=n||0;r=r||0;var q=h.isJulianCalendar(e,
a,d);e=2<a?e:e-1;var b=Math.floor(e/100);return(q?0:2-b+Math.floor(b/4))+Math.floor(365.25*(e+4716))+Math.floor(30.6001*((2<a?a:a+12)+1))-1524.5+d+k/24+l/1440+(n+r/1E3)/86400};return h}();l.UtcDate=k},{"../engine/meeusEngine":11}],11:[function(k,n,l){var e=k("../angle"),h=k("../datetime/utcdate"),g=k("../datetime/hjddate"),a=k("../datetime/ttdate"),d=k("../datetime/siderealtimes"),u=k("../datetime/taidate"),p=k("../coordinateSystems/geographicCoordinates"),t=k("../coordinateSystems/equatorialCoordinates"),
r=k("../coordinateSystems/horizontalCoordinates");(function(b){b[b.Official=0]="Official";b[b.Astronomical=1]="Astronomical";b[b.Nautical=2]="Nautical";b[b.Civil=3]="Civil"})(l.Twilight||(l.Twilight={}));var q=l.Twilight;k=function(){function b(){}b.getLeapSeconds=function(c){for(var f=null,m=0;m<b.LeapSeconds.length;m++){var a=b.LeapSeconds[m];if(a.utcdays<c){f=a.taiutc;break}}if(null==f)throw"days";return f.p1+(c-2400000.5-f.p2)*f.p3};b.toTaiDate=function(c){var f=b.getLeapSeconds(c.days);return new u.TaiDate(c.days+
f/86400)};b.toTtDate=function(c){var f=b.getLeapSeconds(c.days)+b.TaiToTtOffsetSeconds;return new a.TtDate(c.days+f/86400)};b.toGmsTime=function(c){c=c.daysSinceJ2000;var f=c/36525,m=f*f;return new d.GmsTime(b.normalize(280.46061837+360.98564736629*c+3.87933E-4*m-m*f/3871E4)/15)};b.toLmsTime=function(c,f){var m=f;m instanceof e.Angle?m=m.degrees:m instanceof p.GeographicCoordinates&&(m=m.longitude.degrees);var a=c.daysSinceJ2000,g=a/36525,h=g*g;return new d.LmsTime(b.normalize(280.46061837+360.98564736629*
a+3.87933E-4*h-h*g/3871E4+m)/15)};b.toGasTime=function(c){return new d.GasTime(b.toGasDegrees(c)/15)};b.toLasTime=function(c,f){var m=f;m instanceof e.Angle?m=m.degrees:m instanceof p.GeographicCoordinates&&(m=m.longitude.degrees);var a=b.toGasDegrees(c);return new d.LasTime(b.normalize(a+m)/15)};b.toHjdDate=function(c,f,m){f=b.earthPositionAt(c);f=b.equatorialToCartesian(f);m=b.equatorialToCartesian(m);m=b.MinsPerAU*(f.x*m.x+f.y*m.y+f.z*m.z);return(new g.HjdDate(c.days)).addMinutes(m)};b.getSunriseAt=
function(c,f,m){return b.calc_SunriseOrSunset(!0,b.prepareJd(f||new Date),c,m||q.Official)};b.getSunsetAt=function(c,f,m){return b.calc_SunriseOrSunset(!1,b.prepareJd(f||new Date),c,m||q.Official)};b.sunPositionAt=function(c){var f=b.preparePositionalParameters(c.centuriesSinceJ2000);c=f.sun.trueLongitude;var m=f.ecliptic.meanObliquity,f=b.datan2(b.dsin(c)*b.dcos(m)-b.dtan(0)*b.dsin(m),b.dcos(c));c=b.dasin(b.dsin(0)*b.dcos(m)+b.dcos(0)*b.dsin(m)*b.dsin(c));return new t.EquatorialCoordinates(e.Angle.fromDegrees(f),
e.Angle.fromDegrees(c))};b.earthPositionAt=function(c){var f=b.preparePositionalParameters(c.centuriesSinceJ2000);c=f.sun.trueLongitude;var m=f.ecliptic.meanObliquity,f=b.datan2(b.dsin(c)*b.dcos(m)-b.dtan(0)*b.dsin(m),b.dcos(c));c=b.dasin(b.dsin(0)*b.dcos(m)+b.dcos(0)*b.dsin(m)*b.dsin(c));f+=180;360<f&&(f-=360);c*=-1;return new t.EquatorialCoordinates(e.Angle.fromDegrees(f),e.Angle.fromDegrees(c))};b.moonPositionAt=function(c){var f=c.centuriesSinceJ2000,m=f*f,a=m*f;c=b.preparePositionalParameters(f);
var d=c.sun.earthDistance,g=c.sun.meanAnomaly;c=c.ecliptic.meanObliquity;var h=b.calc_Moon_ArgumentOfLatitude(f,m,a),k=b.calc_Moon_MeanLongitude(f);b.calc_Moon_LongitudeAscendingNode(f,m,a);var l=b.calc_Moon_MeanAnomaly(f,m,a),f=b.calc_Moon_MeanElongation(f,m,a),m=b.calc_Moon_Earth_Distance(l,f);b.calc_Moon_Sun_DistanceRatio(m,d);d=b.calc_Moon_GeocentricLatitude(h,l,f);h=b.calc_Moon_GeocentricLongitude(l,f,k,h,g);g=b.datan2(b.dsin(h)*b.dcos(c)-b.dtan(d)*b.dsin(c),b.dcos(h));c=b.dasin(b.dsin(d)*b.dcos(c)+
b.dcos(d)*b.dsin(c)*b.dsin(h));return new t.EquatorialCoordinates(e.Angle.fromDegrees(g),e.Angle.fromDegrees(c))};b.getAngularSeparation=function(c,f){var m=c.rightAscension.radians,a=c.declination.radians,d=f.rightAscension.radians,g=f.declination.radians;return e.Angle.fromDegrees(Math.atan2(Math.sqrt(Math.cos(g)*Math.sin(m-d)*Math.cos(g)*Math.sin(m-d)+(Math.cos(a)*Math.sin(g)-Math.cos(g)*Math.sin(a)*Math.cos(m-d))*(Math.cos(a)*Math.sin(g)-Math.cos(g)*Math.sin(a)*Math.cos(m-d))),Math.sin(a)*Math.sin(g)+
Math.cos(a)*Math.cos(g)*Math.cos(m-d))*b.R2D)};b.toHorizontalCoordinates=function(c,f,m){var a;f instanceof Date?a=h.UtcDate.fromDate(f):f instanceof h.UtcDate&&(a=f);c=b.fromJ2000(c,a);a=b.toLasTime(a,m.longitude.degrees);a=e.Angle.fromHours(a.hours-c.rightAscension.hours).normalize().radians;c=c.declination.radians;f=m.latitude.radians;var d=Math.asin(Math.sin(c)*Math.sin(f)+Math.cos(c)*Math.cos(f)*Math.cos(a));m=d*b.R2D;c=Math.acos((Math.sin(c)-Math.sin(d)*Math.sin(f))/(Math.cos(d)*Math.cos(f)))*
b.R2D;0<Math.sin(a)&&(c=360-c);return new r.HorizontalCoordinates(b.toTopocentric(m),e.Angle.fromDegrees(c))};b.toEquatorialCoordinates=function(c,f,a){var d;f instanceof Date?d=h.UtcDate.fromDate(f):f instanceof h.UtcDate&&(d=f);f=c.azimuth.degrees+180;360<=f&&(f-=360);f*=b.D2R;var g=a.latitude.radians;c=b.toGeocentric(c.altitude).radians;var k=e.Angle.fromRadians(Math.atan2(Math.sin(f),Math.cos(f)*Math.sin(g)+Math.tan(c)*Math.cos(g)));a=d.toLasTime(a.longitude.degrees);a=e.Angle.fromHours(a.hours-
k.hours).normalize();f=Math.sin(g)*Math.sin(c)-Math.cos(g)*Math.cos(c)*Math.cos(f);if(-1>f||1<f)throw"Illegal value: "+f+", should be in [-1,1].";return b.toJ2000(new t.EquatorialCoordinates(a,e.Angle.fromRadians(Math.asin(f))),d)};b.dsin=function(c){return Math.sin(b.D2R*c)};b.dcos=function(c){return Math.cos(b.D2R*c)};b.dtan=function(c){return Math.tan(b.D2R*c)};b.dasin=function(c){return b.R2D*Math.asin(c)};b.dacos=function(c){return b.R2D*Math.acos(c)};b.datan=function(c){return b.R2D*Math.atan(c)};
b.datan2=function(c,f){var a;if(0==f&&0==c)return 0;a=b.datan(c/f);0>f&&(a+=180);0>c&&0<f&&(a+=360);return a};b.normalize=function(c){return c-360*Math.floor(c/360)};b.addCartesian=function(c,f){return{x:c.x+f.x,y:c.y+f.y,z:c.z+f.z}};b.equatorialToCartesian=function(c){var f=c.rightAscension.radians;c=c.declination.radians;var b=Math.cos(c);return{x:Math.cos(f)*b,y:Math.sin(f)*b,z:Math.sin(c)}};b.geographicToCartesian=function(c,f){var b=f.toGasTime(),a=.017453292519943295*c.latitude.degrees,e=Math.sin(a),
a=Math.cos(a),d=1/Math.sqrt(Math.pow(a,2)+.9933056213348961*Math.pow(e,2)),g=c.altitude/1E3,h=6378.14*d+g,b=.017453292519943295*(15*b.hours+c.longitude.degrees);return{x:h*a*Math.cos(b)/149597870,y:h*a*Math.sin(b)/149597870,z:(6335.442315660955*d+g)*e/149597870}};b.preparePositionalParameters=function(c){var f=b.calc_Sun_MeanLongitude(c),a=b.calc_Sun_MeanAnomaly(c),e=b.calc_Sun_EqOfCenter(c,a),d=b.calc_Sun_TrueAnomaly(c,a,e),g=b.calc_Earth_OrbitEccentricity(c),f=b.calc_Sun_TrueLong(c,f,e),h=b.calc_Sun_LongitudeOfAscendingNode(c),
h=b.calc_Sun_ApparentLong(c,f,h),k=b.calc_Ecliptic_MeanObliquity(c);c=b.calc_Sun_Earth_Distance(c,g,a,e,d);return{sun:{trueLongitude:f,apparentLongitude:h,earthDistance:c,meanAnomaly:a},ecliptic:{meanObliquity:k}}};b.calc_Earth_OrbitEccentricity=function(c){return.016708634-c*(4.2037E-5+1.267E-7*c)};b.earthCartesianPositionAt=function(c){c=b.earthPositionAt(c);return b.equatorialToCartesian(c)};b.earthCartesianVelocityAt=function(c){var f=b.earthPositionAt(c);c=b.earthPositionAt(c.addMinutes(-1));
f=b.equatorialToCartesian(f);c=b.equatorialToCartesian(c);return{x:(f.x-c.x)/7.04E-4,y:(f.y-c.y)/7.04E-4,z:(f.z-c.z)/7.04E-4}};b.convertToHeliocentric=function(c,f){var a=b.earthCartesianPositionAt(f),e=b.geographicToCartesian(c,f);return{x:a.x+e.x,y:a.y+e.y,z:a.z+e.z}};b.calc_Ecliptic_MeanObliquity=function(c,f,b){f=f||c*c;return(21.448/60+26)/60+23+(-46.815*c-5.9E-4*f+.001813*(b||f*c))/3600};b.calc_Ecliptic_ObliquityCorrection=function(c,f){var a=f||b.calc_Ecliptic_MeanObliquity(c),e=b.calc_Sun_LongitudeOfAscendingNode(c);
return a+.00256*Math.cos(b.D2R*e)};b.calc_Sun_Earth_Distance=function(c,f,a,e,d){f=f||b.calc_Earth_OrbitEccentricity(c);a=a||b.calc_Sun_MeanAnomaly(c);e=e||b.calc_Sun_EqOfCenter(c,a);d=d||b.calc_Sun_TrueAnomaly(c,a,e);return.99972/(1+f*b.dcos(d))};b.calc_Sun_MeanLongitude=function(c){return b.normalize(280.46646+c*(36000.76983+3.032E-4*c))};b.calc_Sun_MeanAnomaly=function(c,f,a){f=f||c*c;return b.normalize(357.52772+35999.05034*c-1.603E-4*f-(a||c*f)/3E5)};b.calc_Sun_EqOfCenter=function(c,f){var a=
f||b.calc_Sun_MeanAnomaly(c),a=b.D2R*a;return Math.sin(a)*(1.914602-c*(.004817+1.4E-5*c))+Math.sin(a+a)*(.019993-1.01E-4*c)+2.89E-4*Math.sin(a+a+a)};b.calc_Sun_TrueLong=function(c,f,a){f=f||b.calc_Sun_MeanLongitude(c);c=a||b.calc_Sun_EqOfCenter(c);return f+c};b.calc_Sun_TrueAnomaly=function(c,f,a){f=f||b.calc_Sun_MeanAnomaly(c);c=a||b.calc_Sun_EqOfCenter(c);return f+c};b.calcSunRadVector=function(c,f,a){f=f||b.calc_Sun_TrueAnomaly(c);c=a||b.calc_Earth_OrbitEccentricity(c);return 1.000001018*(1-c*
c)/(1+c*Math.cos(b.D2R*f))};b.calc_Sun_LongitudeOfAscendingNode=function(c,f,a){f=f||c*c;return b.normalize(125.04452-1934.136261*c+.0020708*f+(a||f*c)/45E4)};b.calc_Sun_ApparentLong=function(c,f,a){f=f||b.calc_Sun_TrueLong(c);a=a||b.calc_Sun_LongitudeOfAscendingNode(c);return f-.00569-.00478*Math.sin(b.D2R*a)};b.calc_Moon_MeanAnomaly=function(c,f,a){f=f||c*c;return b.normalize(134.96298+477198.867398*c+.0086972*f+(a||f*c)/56250)};b.calc_Moon_MeanElongation=function(c,f,a){f=f||c*c;return b.normalize(297.85036+
445267.11148*c-.0019142*f+(a||f*c)/189474)};b.calc_Moon_MeanLongitude=function(c){return b.normalize(218.316+481267.8813*c)};b.calc_Moon_LongitudeAscendingNode=function(c,f,a){return b.normalize(125.045-1934.14*c+.002071*f+a/45E4)};b.calc_Moon_Earth_Distance=function(c,f){var a=2*f;return 1+(-20954*b.dcos(c)-3699*b.dcos(a-c)-2956*b.dcos(c))/385E3};b.calc_Moon_Sun_DistanceRatio=function(c,f){return c/f/379.168831168831};b.calc_Moon_GeocentricLatitude=function(c,f,a){a*=2;var e=5.128*b.dsin(c)+.2806*
b.dsin(f+c);return e=e+.2777*b.dsin(f-c)+.1732*b.dsin(a-c)};b.calc_Moon_GeocentricLongitude=function(c,f,a,e,d){f*=2;var g=6.289*b.dsin(c)+1.274*b.dsin(f-c)+.6583*b.dsin(f),g=g+.2136*b.dsin(2*c)-.1851*b.dsin(d)-.1143*b.dsin(2*e),g=g+.0588*b.dsin(f-2*c),g=g+.0572*b.dsin(f-d-c)+.0533*b.dsin(f+c);return g+a};b.calc_Moon_HeliocentricLatitude=function(c,f){return c*f};b.calc_Moon_HeliocentricLongitude=function(c,f,a,e){return b.normalize(c+180+180/Math.PI*f*b.dcos(a)*b.dsin(c-e))};b.calc_Moon_ArgumentOfLatitude=
function(c,f,a){f=f||c*c;return b.normalize(93.27191+483202.017538*c-.0036825*f+(a||f*c)/327270)};b.calc_Moon_LongitudeOfTerminator=function(c){var f=c.centuriesSinceJ2000,a=f*f,d=f*a;c=b.calc_Earth_OrbitEccentricity(f);var g=b.calc_Sun_MeanAnomaly(f,a,d),h=b.calc_Sun_EqOfCenter(f,g),k=b.calc_Sun_TrueAnomaly(f,g,h),l=b.calc_Sun_Earth_Distance(f,c,g,h,k);c=b.calc_Sun_LongitudeOfAscendingNode(f,a,d);var k=b.calc_Sun_MeanLongitude(f),h=b.calc_Sun_TrueLong(f,k,h),h=b.calc_Sun_ApparentLong(f,h,c),k=b.calc_Moon_MeanAnomaly(f,
a,d),n=b.calc_Moon_MeanElongation(f,a,d),p=b.calc_Moon_Earth_Distance(k,n),l=b.calc_Moon_Sun_DistanceRatio(p,l),a=b.calc_Moon_ArgumentOfLatitude(f,a,d),d=b.calc_Moon_GeocentricLatitude(a,k,n),f=b.calc_Moon_MeanLongitude(f),f=b.calc_Moon_GeocentricLongitude(k,n,f,a,g),g=b.calc_Moon_HeliocentricLatitude(l,d),f=b.calc_Moon_HeliocentricLongitude(h,l,g,f);c=b.normalize(f-c);f=b.dcos(c)*b.dcos(g);d=b.dsin(c)*b.dcos(g)*b.dcos(1.54242)-b.dsin(g)*b.dsin(1.54242);f=b.datan2(d,f);f=b.normalize(f-a);b.dasin(-b.dsin(c)*
b.dcos(g)*b.dsin(1.54242)-b.dsin(g)*b.dcos(1.54242));c=90>f?90-f:450-f;return e.Angle.fromDegrees(90<c&&270>c?180-c:90>c?0-c:360-c)};b.calc_Moon_IlluminatedDiscFraction=function(c){var f=c.centuriesSinceJ2000,a=f*f,e=f*a;c=b.calc_Earth_OrbitEccentricity(f);var d=b.calc_Sun_MeanAnomaly(f,a,e),g=b.calc_Sun_EqOfCenter(f,d),h=b.calc_Sun_TrueAnomaly(f,d,g);c=b.calc_Sun_Earth_Distance(f,c,d,g,h);var h=b.calc_Sun_LongitudeOfAscendingNode(f,a,e),k=b.calc_Sun_MeanLongitude(f),g=b.calc_Sun_TrueLong(f,k,g),
k=b.calc_Sun_ApparentLong(f,g,h),l=b.calc_Moon_MeanAnomaly(f,a,e),n=b.calc_Moon_MeanElongation(f,a,e),g=b.calc_Moon_Earth_Distance(l,n),g=b.calc_Moon_Sun_DistanceRatio(g,c),a=b.calc_Moon_ArgumentOfLatitude(f,a,e),e=b.calc_Moon_GeocentricLatitude(a,l,n),f=b.calc_Moon_MeanLongitude(f),d=b.calc_Moon_GeocentricLongitude(l,n,f,a,d),f=b.calc_Moon_HeliocentricLatitude(g,e),l=b.calc_Moon_HeliocentricLongitude(k,g,f,d),l=b.normalize(l-h),n=b.dcos(l)*b.dcos(f),h=b.dsin(l)*b.dcos(f)*b.dcos(1.54242)-b.dsin(f)*
b.dsin(1.54242);b.normalize(b.datan2(h,n)-a);b.dasin(-b.dsin(l)*b.dcos(f)*b.dsin(1.54242)-b.dsin(f)*b.dcos(1.54242));k=b.dcos(e)*b.dcos(d-k);h=90-b.datan(k/Math.sqrt(1-k*k));h=c*b.dsin(h);c=b.datan2(h,g-c*k);return(1+b.dcos(c))/2};b.calc_Ecliptic_NutationInLongitude=function(c,f,b,a,e,d){var g=-(171996+174.2*c)*Math.sin(f)-(13187+1.6*c)*Math.sin(-2*b+2*a+2*f)-(2274+.2*c)*Math.sin(2*a+2*f)+(2062+.2*c)*Math.sin(2*f)+(1426-3.4*c)*Math.sin(e)+(712+.1*c)*Math.sin(d),g=g+((-517+1.2*c)*Math.sin(-2*b+e+2*
a+2*f)-(386+.4*c)*Math.sin(2*a+f)-301*Math.sin(d+2*a+2*f)+(217-.5*c)*Math.sin(-2*b-e+2*a+2*f)-158*Math.sin(-2*b+d)),g=g+((129+.1*c)*Math.sin(-2*b+2*a+f)+123*Math.sin(-d+2*a+2*f)+63*Math.sin(2*b)+(63+.1*c)*Math.sin(d+f)-59*Math.sin(2*b-d+2*a+2*f)-(58+.1*c)*Math.sin(-d+f)),g=g-51*Math.sin(d+2*a+f),g=g+(48*Math.sin(-2*b+2*d)+46*Math.sin(-2*d+2*a+f)-38*Math.sin(2*b+2*a+2*f)-31*Math.sin(2*d+2*a+2*f)+29*Math.sin(2*d)+29*Math.sin(-2*b+d+2*a+2*f)+26*Math.sin(2*a)),g=g-(22*Math.sin(2*a-2*b)+21*Math.sin(2*
a-d)+(17-.1*c)*Math.sin(2*e)+16*Math.sin(2*b-d+f)-(16-.1*c)*Math.sin(2*(f+a+e-b))-15*Math.sin(e+f)-13*Math.sin(f+d-2*b)-12*Math.sin(f-e)),g=g+(11*Math.sin(2*(d-a))-10*Math.sin(2*b-d+2*a)-8*Math.sin(2*b+d+2*a+2*f)+7*Math.sin(e+2*a+2*f)-7*Math.sin(e+d-2*b)-7*Math.sin(2*a+2*f-e)-7*Math.sin(2*b+2*a+f)),g=g+6*Math.sin(2*b+d),g=g+(6*Math.sin(2*(f+a+d-b))+6*Math.sin(f+2*a+d-2*b)-6*Math.sin(2*b-2*d+f)-6*Math.sin(2*b+f)+5*Math.sin(d-e)-5*Math.sin(f+2*a-e-2*b)-5*Math.sin(f-2*b)-5*Math.sin(f+2*a+2*d)),g=g+(4*
Math.sin(f-2*d-2*b)+4*Math.sin(f+2*a+e-2*b)+4*Math.sin(d-2*a)-4*Math.sin(d-b)-4*Math.sin(e-2*b)-4*Math.sin(b)+3*Math.sin(2*a+d)-3*Math.sin(2*(f+a-d))-3*Math.sin(d-e-b)),g=g-3*Math.sin(d+e),g=g-(3*Math.sin(2*f+2*a+d-e)-3*Math.sin(2*f+2*a-d-e+2*b)-3*Math.sin(2*f+2*a+3*d)-3*Math.sin(2*f+2*a-e+2*b));return 1E-4/3600*g};b.calc_Ecliptic_MeanObliquityCorrection=function(c,f,b,a,e,d,g,h){f=(92025+8.9*c)*Math.cos(a)+(5736-3.1*c)*Math.cos(-2*e+2*d+2*a)+(977-.5*c)*Math.cos(2*d+2*a)+(-895+.5*c)*Math.cos(2*a)+
(54-.1*c)*Math.cos(g)-7*Math.cos(h);f+=(224-.6*c)*Math.cos(-2*e+g+2*d+2*a)+200*Math.cos(2*d+a)+(129-.1*c)*Math.cos(h+2*d+2*a)+(-95+.3*c)*Math.cos(-2*e-g+2*d+2*a)-70*Math.cos(-2*e+2*d+a);f-=53*Math.cos(-h+2*d+2*a)-33*Math.cos(h+a)+26*Math.cos(2*e-h+2*d+2*a)+32*Math.cos(-h+a)+27*Math.cos(h+2*d+a)-24*Math.cos(-2*h+2*d+a);f+=16*Math.cos(2*(e+d+a))+13*Math.cos(2*(h+d+a))-12*Math.cos(2*a+2*d+h-2*e)-10*Math.cos(a+2*d-h)-8*Math.cos(2*e-h+a)+7*Math.cos(2*(a+d+g-e))+9*Math.cos(g+a);f+=7*Math.cos(a+h-2*e)+6*
Math.cos(a-g)+5*Math.cos(a+2*d-h+2*e)+3*Math.cos(2*a+2*d+h+2*e)-3*Math.cos(2*a+2*d+g)+3*Math.cos(2*a+2*d-g)+3*Math.cos(a+2*d+2*e);f-=3*Math.cos(2*(a+d+h-e))-3*Math.cos(a+2*d+h-2*e)+3*Math.cos(a-2*h+2*e)+3*Math.cos(a+2*e)+3*Math.cos(a+2*d-g-2*e)+3*Math.cos(a-2*e)+3*Math.cos(a+2*d+2*h);return 1E-4/3600*f};b.toGasDegrees=function(c){c=c.daysSinceJ2000;var a=c/36525,e=a*a,d=e*a,g=b.calc_Moon_MeanElongation(a,e,d)*b.D2R,h=b.calc_Sun_MeanAnomaly(a,e,d)*b.D2R,k=b.calc_Moon_MeanAnomaly(a,e,d)*b.D2R,l=b.calc_Moon_ArgumentOfLatitude(a,
e,d)*b.D2R,n=b.calc_Sun_LongitudeOfAscendingNode(a,e,d)*b.D2R,p=b.calc_Ecliptic_NutationInLongitude(a,n,g,l,h,k),a=b.calc_Ecliptic_MeanObliquity(a,e,d)+b.calc_Ecliptic_MeanObliquityCorrection(a,e,d,n,g,l,h,k);c=280.46061837+360.98564736629*c+3.87933E-4*e-d/3871E4+p*Math.cos(a*b.D2R);return c=b.normalize(c)};b.correctForRefraction=function(c){c instanceof e.Angle&&(c=c.degrees);var a=1/Math.tan((c+7.31/(c+4.4))*b.D2R),a=a-.06*Math.sin((14.7*a/60+13)*b.D2R);return e.Angle.fromDegrees(c+a/60)};b.uncorrectRefraction=
function(c){c instanceof e.Angle&&(c=c.degrees);var a=1/Math.tan((c+7.31/(c+4.4))*b.D2R),a=a-.06*Math.sin((14.7*a/60+13)*b.D2R);return c-a/60};b.toTopocentric=function(c){c instanceof e.Angle&&(c=c.degrees);return b.correctForRefraction(c-Math.atan(Math.cos(c*b.D2R)/(1E10-Math.sin(c*b.D2R)))*b.R2D)};b.toGeocentric=function(c){c instanceof e.Angle&&(c=c.degrees);c=b.uncorrectRefraction(c);return e.Angle.fromDegrees(c+Math.atan(Math.cos(c*b.D2R)/(1E10-Math.sin(c*b.D2R)))*b.R2D)};b.toUnitVector=function(c){var a=
c.declination.radians;c=c.rightAscension.radians;var b=[];b.push(Math.cos(a)*Math.cos(c));b.push(Math.cos(a)*Math.sin(c));b.push(Math.sin(a));return b};b.fromUnitVector=function(c){var a=Math.asin(c[2]);return new t.EquatorialCoordinates(e.Angle.fromRadians(Math.atan2(c[1],c[0])),e.Angle.fromRadians(a))};b.precesionMatrixParams=function(c){var a=c.centuriesSinceJ2000,b=a*a,e=b*a;c=.011180860865024398*a+1.4635555405334672E-6*b+Math.pow(8.72567663260943,-8)*e;var d=.011180860865024398*a+5.307158404369869E-6*
b+Math.pow(8.825063437236881,-8)*e,a=.009717173455169672*a+2.068457570453835E-6*b+Math.pow(2.0281210721855225,-7)*e;return{p00:Math.cos(d)*Math.cos(a)*Math.cos(c)-Math.sin(d)*Math.sin(c),p01:-Math.cos(d)*Math.cos(a)*Math.sin(c)-Math.sin(d)*Math.cos(c),p02:-Math.cos(d)*Math.sin(a),p10:Math.sin(d)*Math.cos(a)*Math.cos(c)+Math.cos(d)*Math.sin(c),p11:-Math.sin(d)*Math.cos(a)*Math.sin(c)+Math.cos(d)*Math.cos(c),p12:-Math.sin(d)*Math.sin(a),p20:Math.sin(a)*Math.cos(c),p21:-Math.sin(a)*Math.sin(c),p22:Math.cos(a)}};
b.determinant3x3=function(c){return c[0][0]*c[1][1]*c[2][2]-c[0][0]*c[1][2]*c[2][1]-c[0][1]*c[1][0]*c[2][2]+c[0][1]*c[1][2]*c[2][0]+c[0][2]*c[1][0]*c[2][1]-c[0][2]*c[1][1]*c[2][0]};b.inverse3x3=function(c){var a=b.determinant3x3(c);return[[(c[1][1]*c[2][2]-c[1][2]*c[2][1])/a,(c[0][2]*c[2][1]-c[0][1]*c[2][2])/a,(c[0][1]*c[1][2]-c[0][2]*c[1][1])/a],[(c[1][2]*c[2][0]-c[1][0]*c[2][2])/a,(c[0][0]*c[2][2]-c[0][2]*c[2][0])/a,(c[0][2]*c[1][0]-c[0][0]*c[1][2])/a],[(c[1][0]*c[2][1]-c[1][1]*c[2][0])/a,(c[0][1]*
c[2][0]-c[0][0]*c[2][1])/a,(c[0][0]*c[1][1]-c[0][1]*c[1][0])/a]]};b.inversePrecesionMatrixAt=function(c){c=b.precesionMatrixParams(c);return[[c.p00,c.p10,c.p20],[c.p01,c.p11,c.p21],[c.p02,c.p12,c.p22]]};b.precesionMatrixAt=function(c){c=b.precesionMatrixParams(c);return[[c.p00,c.p01,c.p02],[c.p10,c.p11,c.p12],[c.p20,c.p21,c.p22]]};b.matrixTimesMatrix=function(c,a){return[[c[0][0]*a[0][0]+c[0][1]*a[1][0]+c[0][2]*a[2][0],c[0][0]*a[0][1]+c[0][1]*a[1][1]+c[0][2]*a[2][1],c[0][0]*a[0][2]+c[0][1]*a[1][2]+
c[0][2]*a[2][2]],[c[1][0]*a[0][0]+c[1][1]*a[1][0]+c[1][2]*a[2][0],c[1][0]*a[0][1]+c[1][1]*a[1][1]+c[1][2]*a[2][1],c[1][0]*a[0][2]+c[1][1]*a[1][2]+c[1][2]*a[2][2]],[c[2][0]*a[0][0]+c[2][1]*a[1][0]+c[2][2]*a[2][0],c[2][0]*a[0][1]+c[2][1]*a[1][1]+c[2][2]*a[2][1],c[2][0]*a[0][2]+c[2][1]*a[1][2]+c[2][2]*a[2][2]]]};b.matrixTimesVector=function(a,b){return[a[0][0]*b[0]+a[0][1]*b[1]+a[0][2]*b[2],a[1][0]*b[0]+a[1][1]*b[1]+a[1][2]*b[2],a[2][0]*b[0]+a[2][1]*b[1]+a[2][2]*b[2]]};b.fromJ2000=function(a,f){var d=
b.toUnitVector(a),e=b.precesionMatrixAt(f),d=b.matrixTimesVector(e,d);return b.fromUnitVector(d)};b.toJ2000=function(a,f){var d=b.toUnitVector(a),e=b.inversePrecesionMatrixAt(f),d=b.matrixTimesVector(e,d);return b.fromUnitVector(d)};b.toEpoch=function(a,f){var d=f.centuriesSinceJ2000,g=d*d,h=d*g,k;k=b.D2R/3600*(2306.2181*d+.30188*g+.017998*h);var l;l=b.D2R/3600*(2306.2181*d+1.09468*g+.018203*h);var h=b.D2R/3600*(2004.3109*d-.42665*g-.041833*h),n=a.rightAscension.radians,d=a.declination.radians,g=
Math.cos(d)*Math.sin(n+k);k=Math.cos(h)*Math.cos(d)*Math.cos(n+k)-Math.sin(h)*Math.sin(d);l=Math.atan2(g,k)+l;0>l?l+=b.PI2:l>b.PI2&&(l-=b.PI2);l*=b.R2D;k=Math.acos(Math.sqrt(g*g+k*k));0>k*d&&(k=-k);k*=b.R2D;return new t.EquatorialCoordinates(e.Angle.fromDegrees(l),e.Angle.fromDegrees(k))};b.calc_SunriseOrSunset_UTC=function(a,f,d,e){var g=f.centuriesSinceJ2000;f=b.calc_EquationOfTime(g);g=b.calc_Sun_Declination(g);a=b.calcHourAngleSunriseOrSunset(a,d.latitude.degrees,g,e);return 720-4*(d.longitude.degrees+
b.R2D*a)-f};b.prepareJd=function(a){if(a instanceof Date)a=h.UtcDate.fromDate(a);else if(!(a instanceof h.UtcDate))throw"date";return a};b.calc_SunriseOrSunset=function(a,f,d,e){var g=f.toDate();f=new h.UtcDate(h.UtcDate.toUtcDays(g.getFullYear(),g.getMonth(),g.getDate()));var k=-g.getTimezoneOffset()/60,g=b.isDaylightSavingsTime(g),l=d.latitude.degrees,n=d.longitude.degrees,p=b.calc_SunriseOrSunset_UTC(a,f,d,e);d=b.calc_SunriseOrSunset_UTC(a,f.addMinutes(p),d,e);if("number"==typeof d){a=d;if(0<=
a&&1440>a)return f.addMinutes(a);f=f.days;for(k=0>a?1:-1;0>a||1440<=a;)a+=1440*k,f-=k;return(new h.UtcDate(f)).addMinutes(a)}d=b.calcDoyFromJD(f.days);66.4<l&&79<d&&267>d||-66.4>l&&(83>d||263<d)?a?b.calc_JDofNextPrevRiseSet(0,a,f.days,l,n,k,g):b.calc_JDofNextPrevRiseSet(1,a,f.days,l,n,k,g):1==a?b.calc_JDofNextPrevRiseSet(1,a,f.days,l,n,k,g):b.calc_JDofNextPrevRiseSet(0,a,f.days,l,n,k,g);throw"notimplementedyet";};b.calc_JDofNextPrevRiseSet=function(a,d,e,g,h,k,l){a=a?1:-1;for(var n=b.calc_SunriseOrSunset_UTC(d,
e,g,h);"number"!=typeof n;)e+=a,n=b.calc_SunriseOrSunset_UTC(d,e,g,h);for(d=n+60*k+(l?60:0);0>d||1440<=d;)g=0>d?1:-1,d+=1440*g,e-=g;return e};b.isLeapYear=function(a){return 0==a%4&&0!=a%100||0==a%400};b.calcDoyFromJD=function(a){var d=Math.floor(a+.5);if(2299161>d)var e=d;else e=Math.floor((d-1867216.25)/36524.25),e=d+1+e-Math.floor(e/4);var g=e+1524,e=Math.floor((g-122.1)/365.25),h=Math.floor(365.25*e),k=Math.floor((g-h)/30.6001);a=g-h-Math.floor(30.6001*k)+(a+.5-d);d=14>k?k-1:k-13;e=b.isLeapYear(2<
d?e-4716:e-4715)?1:2;return Math.floor(275*d/9)-e*Math.floor((d+9)/12)+a-30};b.calcSunRa=function(a,d,e){d=d||b.calc_Ecliptic_ObliquityCorrection(a);a=e||b.calc_Sun_ApparentLong(a);return b.R2D*Math.atan2(Math.cos(b.D2R*d)*Math.sin(b.D2R*a),Math.cos(b.D2R*a))};b.calc_Sun_Declination=function(a,d,e){d=d||b.calc_Ecliptic_ObliquityCorrection(a);a=e||b.calc_Sun_ApparentLong(a);return b.R2D*Math.asin(Math.sin(b.D2R*d)*Math.sin(b.D2R*a))};b.calc_EquationOfTime=function(a,d,e,g,h){d=d||b.calc_Ecliptic_ObliquityCorrection(a);
e=e||b.calc_Sun_MeanLongitude(a);g=g||b.calc_Earth_OrbitEccentricity(a);a=h||b.calc_Sun_MeanAnomaly(a);h=Math.tan(b.D2R*d/2);h*=h;d=Math.sin(b.D2R*a);e=h*Math.sin(2*b.D2R*e)-2*g*d+4*g*h*d*Math.cos(2*b.D2R*e)-.5*h*h*Math.sin(4*b.D2R*e)-1.25*g*g*Math.sin(2*b.D2R*a);return e=b.R2D*e*4};b.getHRadians=function(a){var b=0;switch(a){case q.Astronomical:b=18;break;case q.Nautical:b=12;break;case q.Civil:b=6;break;case q.Official:b=.833;break;default:throw"twilight";}return b+90};b.calcHourAngleSunriseOrSunset=
function(a,d,e,g){d*=b.D2R;e*=b.D2R;g=b.getHRadians(g);g=Math.acos(Math.cos(b.D2R*g)/(Math.cos(d)*Math.cos(e))-Math.tan(d)*Math.tan(e));return a?g:-g};b.isDaylightSavingsTime=function(a){var b=new Date(a.getFullYear(),0,1),d=new Date(a.getFullYear(),6,1),b=Math.max(b.getTimezoneOffset(),d.getTimezoneOffset());return a.getTimezoneOffset()<b};b.calcAzEl=function(a,d,e,g,h){var k=b.calc_EquationOfTime(a),l=b.calc_Sun_Declination(a);g=k+4*g-60*h;b.calcSunRadVector(a);for(a=d+g;1440<a;)a-=1440;a=a/4-180;
-180>a&&(a+=360);d=Math.sin(b.D2R*e)*Math.sin(b.D2R*l)+Math.cos(b.D2R*e)*Math.cos(b.D2R*l)*Math.cos(b.D2R*a);1<d?d=1:-1>d&&(d=-1);d=b.R2D*Math.acos(d);g=Math.cos(b.D2R*e)*Math.sin(b.D2R*d);.001<Math.abs(g)?(e=(Math.sin(b.D2R*e)*Math.cos(b.D2R*d)-Math.sin(b.D2R*l))/g,1<Math.abs(e)&&(e=0>e?-1:1),e=180-b.R2D*Math.acos(e),0<a&&(e=-e)):e=0<e?180:0;0>e&&(e+=360);return e};b.PI=Math.PI;b.PI2=2*Math.PI;b.D2R=Math.PI/180;b.R2D=180/Math.PI;b.MinsPerAU=8.3168775;b.TaiToTtOffsetSeconds=32.184;b.LeapSeconds=[{utcdays:2457204.5,
taiutc:{p1:36,p2:41317,p3:0}},{utcdays:2456109.5,taiutc:{p1:35,p2:41317,p3:0}},{utcdays:2454832.5,taiutc:{p1:34,p2:41317,p3:0}},{utcdays:2453736.5,taiutc:{p1:33,p2:41317,p3:0}},{utcdays:2451179.5,taiutc:{p1:32,p2:41317,p3:0}},{utcdays:2450630.5,taiutc:{p1:31,p2:41317,p3:0}},{utcdays:2450083.5,taiutc:{p1:30,p2:41317,p3:0}},{utcdays:2449534.5,taiutc:{p1:29,p2:41317,p3:0}},{utcdays:2449169.5,taiutc:{p1:28,p2:41317,p3:0}},{utcdays:2448804.5,taiutc:{p1:27,p2:41317,p3:0}},{utcdays:2448257.5,taiutc:{p1:26,
p2:41317,p3:0}},{utcdays:2447892.5,taiutc:{p1:25,p2:41317,p3:0}},{utcdays:2447161.5,taiutc:{p1:24,p2:41317,p3:0}},{utcdays:2446247.5,taiutc:{p1:23,p2:41317,p3:0}},{utcdays:2445516.5,taiutc:{p1:22,p2:41317,p3:0}},{utcdays:2445151.5,taiutc:{p1:21,p2:41317,p3:0}},{utcdays:2444786.5,taiutc:{p1:20,p2:41317,p3:0}},{utcdays:2444239.5,taiutc:{p1:19,p2:41317,p3:0}},{utcdays:2443874.5,taiutc:{p1:18,p2:41317,p3:0}},{utcdays:2443509.5,taiutc:{p1:17,p2:41317,p3:0}},{utcdays:2443144.5,taiutc:{p1:16,p2:41317,p3:0}},
{utcdays:2442778.5,taiutc:{p1:15,p2:41317,p3:0}},{utcdays:2442413.5,taiutc:{p1:14,p2:41317,p3:0}},{utcdays:2442048.5,taiutc:{p1:13,p2:41317,p3:0}},{utcdays:2441683.5,taiutc:{p1:12,p2:41317,p3:0}},{utcdays:2441499.5,taiutc:{p1:11,p2:41317,p3:0}},{utcdays:2441317.5,taiutc:{p1:10,p2:41317,p3:0}},{utcdays:2439887.5,taiutc:{p1:4.21317,p2:39126,p3:.002592}},{utcdays:2439126.5,taiutc:{p1:4.31317,p2:39126,p3:.002592}},{utcdays:2439004.5,taiutc:{p1:3.84013,p2:38761,p3:.001296}},{utcdays:2438942.5,taiutc:{p1:3.74013,
p2:38761,p3:.001296}},{utcdays:2438820.5,taiutc:{p1:3.64013,p2:38761,p3:.001296}},{utcdays:2438761.5,taiutc:{p1:3.54013,p2:38761,p3:.001296}},{utcdays:2438639.5,taiutc:{p1:3.44013,p2:38761,p3:.001296}},{utcdays:2438486.5,taiutc:{p1:3.34013,p2:38761,p3:.001296}},{utcdays:2438395.5,taiutc:{p1:3.24013,p2:38761,p3:.001296}},{utcdays:2438334.5,taiutc:{p1:1.945858,p2:37665,p3:.0011232}},{utcdays:2437665.5,taiutc:{p1:1.845858,p2:37665,p3:.0011232}},{utcdays:2437512.5,taiutc:{p1:1.372818,p2:37300,p3:.001296}},
{utcdays:2437300.5,taiutc:{p1:1.422818,p2:37300,p3:.001296}}];return b}();l.MeeusEngine=k},{"../angle":1,"../coordinateSystems/equatorialCoordinates":3,"../coordinateSystems/geographicCoordinates":4,"../coordinateSystems/horizontalCoordinates":5,"../datetime/hjddate":6,"../datetime/siderealtimes":7,"../datetime/taidate":8,"../datetime/ttdate":9,"../datetime/utcdate":10}],12:[function(k,n,l){function e(e){for(var g in e)l.hasOwnProperty(g)||(l[g]=e[g])}e(k("./angle"));e(k("./solarSystem/moon"));e(k("./solarSystem/earth"));
e(k("./solarSystem/sun"));e(k("./datetime/hjddate"));e(k("./datetime/siderealtimes"));e(k("./datetime/taidate"));e(k("./datetime/ttdate"));e(k("./datetime/utcdate"));e(k("./coordinateSystems/eclipticCoordinates"));e(k("./coordinateSystems/equatorialCoordinates"));e(k("./coordinateSystems/geographicCoordinates"));e(k("./coordinateSystems/horizontalCoordinates"));e(k("./engine/meeusEngine"))},{"./angle":1,"./coordinateSystems/eclipticCoordinates":2,"./coordinateSystems/equatorialCoordinates":3,"./coordinateSystems/geographicCoordinates":4,
"./coordinateSystems/horizontalCoordinates":5,"./datetime/hjddate":6,"./datetime/siderealtimes":7,"./datetime/taidate":8,"./datetime/ttdate":9,"./datetime/utcdate":10,"./engine/meeusEngine":11,"./solarSystem/earth":13,"./solarSystem/moon":14,"./solarSystem/sun":15}],13:[function(k,n,l){var e=k("../engine/meeusEngine"),h=k("../datetime/utcdate");k=function(){function g(){}g.orbitalEccentricity=function(a){var d=a;d instanceof Date&&(d=h.UtcDate.fromDate(a));return e.MeeusEngine.earthCartesianPositionAt(d)};
g.cartesianPositionAt=function(a){var d=a;d instanceof Date&&(d=h.UtcDate.fromDate(a));return e.MeeusEngine.earthCartesianPositionAt(d)};g.cartesianVelocityAt=function(a){var d=a;d instanceof Date&&(d=h.UtcDate.fromDate(a));return e.MeeusEngine.earthCartesianVelocityAt(d)};return g}();l.Earth=k},{"../datetime/utcdate":10,"../engine/meeusEngine":11}],14:[function(k,n,l){var e=k("../datetime/utcdate"),h=k("../engine/meeusEngine");k=function(){function g(){}g.positionAt=function(a){var d=a;d instanceof
Date&&(d=e.UtcDate.fromDate(a));return h.MeeusEngine.moonPositionAt(d)};g.terminatorLongitudeAt=function(a){var d=a;d instanceof Date&&(d=e.UtcDate.fromDate(a));return h.MeeusEngine.calc_Moon_LongitudeOfTerminator(d)};g.illuminatedDiscFractionAt=function(a){var d=a;d instanceof Date&&(d=e.UtcDate.fromDate(a));return h.MeeusEngine.calc_Moon_IlluminatedDiscFraction(d)};return g}();l.Moon=k},{"../datetime/utcdate":10,"../engine/meeusEngine":11}],15:[function(k,n,l){var e=k("../datetime/utcdate"),h=k("../engine/meeusEngine");
k=function(){function g(){}g.positionAt=function(a){var d=a;d instanceof Date&&(d=e.UtcDate.fromDate(a));return h.MeeusEngine.sunPositionAt(d)};return g}();l.Sun=k},{"../datetime/utcdate":10,"../engine/meeusEngine":11}]},{},[12])(12)});

